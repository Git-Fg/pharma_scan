---
alwaysApply: true
description: Enforced standards for code simplicity, KISS, and YAGNI
globs: **/*.dart
---

# Simplicity Standards (KISS + YAGNI)

## Core Principles

- **Rule of Three:** Do not extract a widget/function until the logic appears in **three** distinct places. Prefer inlined code over premature abstractions; delete dead helpers.
- **No Passthrough Layers:** If a repository/provider only forwards a DAO call without adding type-safety, mapping, or business rules, delete it and call the DAO directly.
- **No Dumb Wrappers:** Do not wrap Shadcn (or other library) widgets with static padding/styling or passthrough props. Use them directly or apply Theme Extensions. (See `.cursor/rules/ui-policy.mdc` for UI specifics.)
- **State Locality:** Use `flutter_hooks` (`useState`, `useRef`, `useEffect`) for UI-only state (e.g., toggles, focus, animations). Only promote to Riverpod when state is shared across widgets/features or persisted.
- **Just Enough (YAGNI):** Solve the current problem. Do not add parameters, flags, or types for hypothetical futures. Remove unused branches and configuration.

## Abstractions Must Pay Rent

- Create/keep an abstraction only if it **reduces complexity**, **adds type safety**, or **encapsulates behavior**. Otherwise, delete it.
- Prefer direct calls over helper indirection; prefer extension types/extension methods when lightweight typing or ergonomics are needed.

## Implementation Checklist

- Before adding a new file or class, ask: can this be solved by deleting or simplifying existing code?
- If a pattern appears for the first time, **copy-paste is acceptable**; extract only after the third occurrence.
- For UI composition, combine components inline unless there is conditional logic, state, or 3+ distinct Shadcn parts to coordinate.
