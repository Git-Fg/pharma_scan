{
  "url": "https://pub.dev/documentation/csv/latest",
  "markdown": "# csv - Dart API docs\nmenu[![](https://pub.dev/static/hash-jnfujih4/img/dart-logo.svg)](https://pub.dev/)\n1.  [csv package](https://pub.dev/packages/csv)\n2.  documentation\ncsv package\ndark\\_modelight\\_mode\n_Specify (at least a major) version when adding this project as dependency. Whenever the API has incompatible changes the major version changes!_\n# Changes from version 3 to 4:\n-   no new functionality.\n-   adapted to dart2. This library is no longer a codec!\n# Changes from version 2 to 3:\n-   `parseNumbers` has been renamed to `shouldParseNumbers`\n-   `FirstOccurenceSettingsDetector` has been renamed to `FirstOccurrenceSettingsDetector`\n-   Speed improvements.\n# Changes from version 3.0 to 3.1\n-   added option `delimitAllFields`\n-   fix issue #5 (endDelimiter was not always taken correctly from delimiter)\n## Changes from version 3.1 to 3.1.1\n-   fix issue #10 (SDK version was overlay restrictive)\n# csv\nA dart csv to list converter.\nIf you have a `String` of all rows with RFC conform separators and delimiters, simply convert them with:\n```dart\nList<List<dynamic>> rowsAsListOfValues = const CsvToListConverter().convert(yourString);\n```\nTo convert to a Csv string your values must be in a `List<List<dynamic>>` representing a List of Rows where every Row is a List of values. You can then convert with:\n```dart\nString csv = const ListToCsvConverter().convert(yourListOfLists);\n```\nThe default (RFC conform) configuration is:\n-   _,_ as field separator\n-   _\"_ as text delimiter and\n-   _\\\\r\\\\n_ as eol.\nSee below if you need other settings, or want to autodetect them.\nThis converter may be used as transformer for streams:\n```dart\nfinal stream = Stream.fromIterable([['a', 'b'], [1, 2]]);\nfinal csvRowStream = stream.transform(ListToCsvConverter());\n```\nOr the decoder side:\n```dart\nfinal input = File('a/csv/file.txt').openRead();\nfinal fields = await input.transform(utf8.decoder).transform(CsvToListConverter()).toList();\n```\nThe converter is highly customizable and even allows multiple characters as delimiters or separators.\n![Build Status](https://travis-ci.org/close2/csv.svg?branch=master)\n### The decoder\nEvery csv row is converted to a list of values. Unquoted strings looking like numbers (integers and doubles) are by default converted to `int`s or `double`s.\n### The encoder\nThe input must be a `List` of `List`s. Every inner list is converted to one output csv row. The string representation of values is obtained by calling `toString`.\nThis converter follows the rules of [rfc4180](https://tools.ietf.org/html/rfc4180).\nThis means that text fields containing any delimiter or an eol are quoted.\nThe default configuration is:\n-   _,_ as field separator\n-   _\"_ as text delimiter and\n-   _\\\\r\\\\n_ as eol.\nThis parser will accept eol and text-delimiters inside unquoted text and not throw an error.\nIn addition, this converter supports multiple characters for all delimiters and eol. Also, the start text delimiter and end text delimiter may be different. This means the following text can be parsed: `«abc«d»*|*«xy»»z»*|*123`\nAnd (if configured correctly) will return `['abc«d', 'xy»z', 123]`\n## Usage\n### Encoder `List<List>` → `String`\nIf the default values are fine, simply instantiate `ListToCsvConverter` and call `convert`:\n```dart\nfinal res = const ListToCsvConverter().convert([[',b', 3.1, 42], ['n\\n']]);\nassert(res == '\",b\",3.1,42\\r\\n\"n\\n\"');\n```\nConsider using the `returnString = false` option to work around a performance bug.\nThere are 2 interesting things to note:\n-   Not all rows have to be the same length.\n-   The default eol is `'\\r\\n'` and `'\\n'` is also quoted. The appearance of only one character is enough for the string to be quoted.\nThe converter takes the following configurations either in the constructor or the `convert` function:\n-   `fieldDelimiter`: the separator between fields. By default `','` but another common value is `';'`.\n-   `textDelimiter`: the quotation string. By default `'\"'`.\n-   `textEndDelimiter`: the end quotation string. By default, equals `textDelimiter`. The string used to end a quoted string.\n-   `eol`: The new line string. By default `'\\r\\n'`. Another common value: `'\\n'`\n-   `convertNullTo`: If a value is `null`, use this value instead. To get an empty entry instead of string `null`, use `''`.\n_All configuration values may be multiple characters!:_\n```dart\nconst conv = const ListToCsvConverter(fieldDelimiter: '|*|',\n                                      textDelimiter: '<<',\n                                      textEndDelimiter: '>>',\n                                      eol: '**\\n');\nfinal res = conv.convert([['a','>'], ['<<', '>>'], [1, 2]]);\nassert(res == 'a|*|<<>>>**\\n<<<<>>|*|<<>>>>>>**\\n1|*|2');\nfinal res2 = const ListToCsvConverter()\n    .convert([['a','>'], ['<<', '>>'], [1, 2]],\n             fieldDelimiter: '|*|',\n             textDelimiter: '<<',\n             textEndDelimiter: '>>',\n             eol: '**\\n',\n             convertNullTo: '');\nassert(res == res2);\n```\nNote that:\n-   `'>'` is quoted\n-   `'<<'` is quoted as well, but because it is \"only\" a start text delimiter it is _not_ doubled. (See rule 7. below).\n-   `'>>'` is quoted. _Only the end-quote string is doubled!_\n### Decoder `String` → `List<List>`\nIf the default values are fine, simply instantiate `CsvToListConverter` and call `convert`:\n```dart\nfinal res = const CsvToListConverter().convert('\",b\",3.1,42\\r\\n\"n\\n\"');\nassert(res.toString() == [[',b', 3.1, 42], ['n\\n']].toString());\n```\nAgain please note that depending on the input not all rows have the same number of values.\nThe `CsvToListConverter` takes the same arguments as the `ListToCsvConverter` (except for `convertNullTo`) plus\n-   `shouldParseNumbers`: by default true. If you want the output to be `String`s only set this to false.\n-   `allowInvalid`: by default _true_. The converter will by default never throw an exception. Even if `fieldDelimiter`, `textDelimiter`,... don't make sense or the csv-String is invalid. This may for instance happen if the csv-String ends with a quoted String without the end-quote (`textEndDelimiter`) string.\n-   `csvSettingsDetector`: must be an object which extends from `CsvSettingsDetector`. There implementation simply selects the first occurrence of a list of possible values as value.\n-   `convertEmptyTo`: If a field is empty (and not quoted!) use this value instead.\n    `convertEmptyTo: [1, 2, 3]` would insert the list `[1, 2, 3]` whenever a field is empty.\n    To convert empty fields to `null`, use the enum: `EmptyValue.NULL`: `var csv = CsvToListConverter(convertEmptyTo: EmptyValue.NULL).convert(input);`\n    ```dart\n    var d = FirstOccurrenceSettingsDetector(eols: ['\\r\\n', '\\n'],\n                                                textDelimiters: ['\"', \"'\"]);\n    CsvToListConverter(csvSettingsDetector: d);\n    ```\nIn this case `eol` will either be `'\\r\\n'` or `'\\n'` depending on which of those 2 comes first in the csv string. Note that the `FirstOccurrenceSettingsDetector` doesn't parse the csv string! For instance if eol should be `'\\r\\n'` but there is a field with a correctly quoted `'\\n'` in the first row, `'\\n'` is used instead.\nIf you csv String contains a (simple) header row, or all eols are equal this is good enough.\nFeel free to submit something more intelligent.\nTo check your configuration values there is `CsvToListConverter.verifySettings` and `verifyCurrentSettings`. Both return an empty list if all settings are valid, or a list of errors. If the optional `throwError` is true an error is thrown in case the settings are invalid.\nAll settings must be set, i.e. not be null, and delimiters, separators and eols must be distinguishable, i.e. they may not be the start of another settings.\n## CSV rules -- copied from RFC4180 Chapter 2\nAd rule 3: removed as it is not relevant for this converter.\n1.  Each record is located on a separate line, delimited by a line break (CRLF). For example: aaa,bbb,ccc CRLF zzz,yyy,xxx CRLF\n2.  The last record in the file may or may not have an ending line break. For example: `aaa,bbb,ccc CRLF` zzz,yyy,xxx\n3.  ... (Header-lines)\n4.  Within the header and each record, there may be one or more fields, separated by commas. Each line should contain the same number of fields throughout the file. Spaces are considered part of a field and should not be ignored. The last field in the record must not be followed by a comma. For example:\n    aaa,bbb,ccc\n5.  Each field may or may not be enclosed in double quotes (however some programs, such as Microsoft Excel, do not use double quotes at all). If fields are not enclosed with double quotes, then double quotes may not appear inside the fields. For example:\n    \"aaa\",\"bbb\",\"ccc\" CRLF zzz,yyy,xxx\n6.  Fields containing line breaks (CRLF), double quotes, and commas should be enclosed in double-quotes. For example:\n    \"aaa\",\"b CRLF bb\",\"ccc\" CRLF zzz,yyy,xxx\n7.  If double-quotes are used to enclose fields, then a double-quote appearing inside a field must be escaped by preceding it with another double quote. For example:\n    \"aaa\",\"b\"\"bb\",\"ccc\"\n## Libraries\n[csv](https://pub.dev/documentation/csv/csv/)\n[csv\\_settings\\_autodetection](https://pub.dev/documentation/csv/csv_settings_autodetection/)\n1.  [csv package](https://pub.dev/packages/csv)\n2.  documentation\n##### csv package\n1.  Libraries\n2.  [csv](https://pub.dev/documentation/csv/csv/)\n3.  [csv\\_settings\\_autodetection](https://pub.dev/documentation/csv/csv_settings_autodetection/)\ncsv 6.0.0",
  "timestamp": 1769963931199,
  "title": "csv - Dart API docs"
}