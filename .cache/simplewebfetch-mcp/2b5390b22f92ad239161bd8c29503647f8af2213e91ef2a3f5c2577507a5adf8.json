{
  "url": "https://drift.simonbinder.eu/sql_api/extensions",
  "markdown": "# Supported sqlite extensions\n[Drift](https://drift.simonbinder.eu/)\n-   [Docs](https://drift.simonbinder.eu/)\n-   [Guides](https://drift.simonbinder.eu/guides/datetime-migrations)\n-   [Examples](https://drift.simonbinder.eu/examples/)\n-   [pub.dev](https://pub.dev/packages/drift)\n-   [Docs](https://drift.simonbinder.eu/)\n    -   -   [Home](https://drift.simonbinder.eu/)\n        -   [Setup guide](https://drift.simonbinder.eu/setup)\n        -   [FAQ](https://drift.simonbinder.eu/faq)\n    -   Dart reference\n        -   [Defining tables](https://drift.simonbinder.eu/dart_api/tables)\n        -   [Selects](https://drift.simonbinder.eu/dart_api/select)\n        -   [Writes (update, insert, delete)](https://drift.simonbinder.eu/dart_api/writes)\n        -   [Expressions](https://drift.simonbinder.eu/dart_api/expressions)\n        -   [Stream queries](https://drift.simonbinder.eu/dart_api/streams)\n        -   [Schema introspection](https://drift.simonbinder.eu/dart_api/schema_inspection)\n        -   [Views](https://drift.simonbinder.eu/dart_api/views)\n        -   [DAOs](https://drift.simonbinder.eu/dart_api/daos)\n        -   [Manager API](https://drift.simonbinder.eu/dart_api/manager)\n        -   [Transactions](https://drift.simonbinder.eu/dart_api/transactions)\n    -   SQL API reference\n        -   [Overview](https://drift.simonbinder.eu/sql_api)\n        -   [Drift files](https://drift.simonbinder.eu/sql_api/drift_files)\n        -   [SQLite extensions](https://drift.simonbinder.eu/sql_api/extensions)\n        -   [Custom queries](https://drift.simonbinder.eu/sql_api/custom_queries)\n    -   Migrations\n        -   [Overview](https://drift.simonbinder.eu/migrations)\n        -   [Migrator APIs](https://drift.simonbinder.eu/migrations/api)\n        -   [Testing](https://drift.simonbinder.eu/migrations/tests)\n        -   [Helpers](https://drift.simonbinder.eu/migrations/step_by_step)\n        -   [Schema exports](https://drift.simonbinder.eu/migrations/exports)\n    -   Platforms\n        -   [Overview](https://drift.simonbinder.eu/platforms)\n        -   [Native](https://drift.simonbinder.eu/platforms/vm)\n        -   [Web](https://drift.simonbinder.eu/platforms/web)\n        -   [Encryption](https://drift.simonbinder.eu/platforms/encryption)\n        -   [libsql](https://drift.simonbinder.eu/platforms/libsql)\n        -   [PostgreSQL](https://drift.simonbinder.eu/platforms/postgres)\n    -   Generation options\n        -   [Overview](https://drift.simonbinder.eu/generation_options)\n        -   [Modular code generation](https://drift.simonbinder.eu/generation_options/modular)\n        -   [Drift and other builders](https://drift.simonbinder.eu/generation_options/in_other_builders)\n    -   Tools\n        -   [Overview](https://drift.simonbinder.eu/tools)\n        -   [Devtools extension](https://drift.simonbinder.eu/tools/devtools)\n        -   [Community tools](https://drift.simonbinder.eu/community_tools)\n    -   Advanced topics\n        -   [Isolates](https://drift.simonbinder.eu/isolates)\n        -   [Testing](https://drift.simonbinder.eu/testing)\n        -   [Generated table rows](https://drift.simonbinder.eu/dart_api/rows)\n        -   [Type converters](https://drift.simonbinder.eu/type_converters)\n        -   [Custom SQL types](https://drift.simonbinder.eu/sql_api/types)\n[Edit this page](https://github.com/simolus3/drift/edit/develop/docs/content/sql_api/extensions.md) [Create documentation issue](https://github.com/simolus3/drift/issues/new?template=docs.md&title=Documentation+issue%3A+Supported+sqlite+extensions)\nOn this page[](# \"Top of the page\")\n-   [json1](#json1)\n-   [fts5](#fts5)\n-   [geopoly](#geopoly)\n# Supported sqlite extensions\nInformation on json1 and fts5 support in drift files\nWhen analyzing `.drift` files, the generator can consider sqlite3 extensions that might be present. The generator can't know about the sqlite3 library your database is talking to though, so it makes a pessimistic assumption of using an old sqlite3 version without any enabled extensions by default. When using a package like `sqlite3_flutter_libs`, you get the latest sqlite3 version with the json1 and fts5 extensions enabled. You can inform the generator about this by using [build options](https://drift.simonbinder.eu/generation_options).\n## json1[#](https://drift.simonbinder.eu/sql_api/extensions#json1)\nTo enable the json1 extension in drift files and compiled queries, modify your [build options](https://drift.simonbinder.eu/generation_options) to include `json1` in the `sqlite_module` section.\nThe sqlite extension doesn't require any special tables and works on all text columns. In drift files and compiled queries, all `json` functions are available after enabling the extension.\nSince the json extension is optional, enabling it in Dart requires a special import, `package:drift/extensions/json1.dart`. An example that uses json functions in Dart is shown below:\n```\nimport 'package:drift/drift.dart';\nimport 'package:drift/extensions/json1.dart';\nclass Contacts extends Table {\n    IntColumn get id => integer().autoIncrement()();\n    TextColumn get data => text()();\n}\n@DriftDatabase(tables: [Contacts])\nclass Database extends _$Database {\n  // constructor and schemaVersion omitted for brevity\n  Future<List<Contacts>> findContactsWithNumber(String number) {\n    return (select(contacts)\n      ..where((row) {\n        // assume the phone number is stored in a json key in the `data` column\n        final phoneNumber = row.data.jsonExtract<String, StringType>('phone_number');\n        return phoneNumber.equals(number);\n      })\n    ).get();\n  }\n}\n```\nYou can learn more about the json1 extension on [sqlite.org](https://www.sqlite.org/json1.html).\n## fts5[#](https://drift.simonbinder.eu/sql_api/extensions#fts5)\nThe fts5 extension provides full-text search capabilities in sqlite tables. To enable the fts5 extension in drift files and compiled queries, modify the [build options](https://drift.simonbinder.eu/generation_options) to include `fts5` in the `sqlite_module` section.\nJust like you'd expect when using sqlite, you can create a fts5 table in a drift file by using a `CREATE VIRTUAL TABLE` statement.\n```\nCREATE VIRTUAL TABLE email USING fts5(sender, title, body);\n```\nQueries on fts5 tables work like expected:\n```\nemailsWithFts5: SELECT * FROM email WHERE email MATCH 'fts5' ORDER BY rank;\n```\nThe `bm25`, `highlight` and `snippet` functions from fts5 can also be used in custom queries.\nIt's not possible to declare fts5 tables, or queries on fts5 tables, in Dart. You can learn more about the fts5 extension on [sqlite.org](https://www.sqlite.org/fts5.html).\n## geopoly[#](https://drift.simonbinder.eu/sql_api/extensions#geopoly)\nThe Geopoly module is an alternative interface to the [R-Tree](https://www.sqlite.org/rtree.html) extension that uses the [GeoJSON](https://geojson.org/) notation ([RFC-7946](https://datatracker.ietf.org/doc/html/rfc7946)) to describe two-dimensional polygons. Geopoly includes functions for detecting when one polygon is contained within or overlaps with another, for computing the area enclosed by a polygon, for doing linear transformations of polygons, for rendering polygons as [SVG](https://en.wikipedia.org/wiki/SVG), and other similar operations.\nTo enable the `geopoly` extension in drift files and compiled queries, modify the [build options](https://drift.simonbinder.eu/generation_options) to include `geopoly` in the `sqlite_module` section.\nAn example of creating a virtual table using this extension:\n```\ncreate virtual table geo using geopoly(geoID, a, b);\n```\nSqlite will accept any types in additional columns (`geoID`, `a`, `b` from the example above), so `drift` will generate a `DriftAny` type for these columns, which is not always convenient. To avoid this, you can add types as in this example:\n```\ncreate virtual table geo using geopoly (\n    geoID INTEGER not null,\n    a INTEGER,\n    b\n);\n```\nThis will add hints to column types and then the Dart code will be more convenient to use\nYou can learn more about the geopoly extension on [sqlite.org](https://www.sqlite.org/geopoly.html).\n-   [](https://github.com/simolus3/drift)\n[](https://jaspr.site \"Built with the Jaspr web framework for Dart.\")\n©2019–2025Simon Binder, Drift authors. Documentation licensed under [CC0 1.0](https://creativecommons.org/publicdomain/zero/1.0/), Drift itself is [MIT-licensed](https://github.com/simolus3/drift/blob/develop/LICENSE)",
  "timestamp": 1769963782148,
  "title": "Supported sqlite extensions"
}