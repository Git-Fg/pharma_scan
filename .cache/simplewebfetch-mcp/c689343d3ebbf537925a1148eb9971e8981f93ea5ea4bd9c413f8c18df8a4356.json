{
  "url": "https://bun.sh/docs/runtime/sqlite",
  "markdown": "# SQLite - Bun\n[Skip to main content](#content-area)\n[Bun home page![light logo](https://mintcdn.com/bun-1dd33a4e/fU8ET1hSpIaJ6oEr/logo/logo-with-wordmark-dark.svg?fit=max&auto=format&n=fU8ET1hSpIaJ6oEr&q=85&s=bc6b0756f8940746ce64a5f5bdf936dd)![dark logo](https://mintcdn.com/bun-1dd33a4e/fU8ET1hSpIaJ6oEr/logo/logo-with-wordmark-light.svg?fit=max&auto=format&n=fU8ET1hSpIaJ6oEr&q=85&s=6a50d79c62849b762491496b60a707f5)](https://bun.sh/docs)\nSearch...\n⌘K\n-   [Install Bun](https://www.bun.com/docs/installation)\nSearch...\nNavigation\nData & Storage\nSQLite\n[Runtime\n](https://bun.sh/docs)[Package Manager\n](https://bun.sh/docs/pm/cli/install)[Bundler\n](https://bun.sh/docs/bundler)[Test Runner\n](https://bun.sh/docs/test)[Guides\n](https://bun.sh/docs/guides)[Reference\n](https://bun.com/reference)[Blog\n](https://bun.com/blog)[Feedback\n](https://bun.sh/docs/feedback)\n##### Get Started\n-   [\n    Welcome to Bun\n    ](https://bun.sh/docs)\n-   [\n    Installation\n    ](https://bun.sh/docs/installation)\n-   [\n    Quickstart\n    ](https://bun.sh/docs/quickstart)\n-   [\n    TypeScript\n    ](https://bun.sh/docs/typescript)\n-   [\n    bun init\n    ](https://bun.sh/docs/runtime/templating/init)\n-   [\n    bun create\n    ](https://bun.sh/docs/runtime/templating/create)\n##### Core Runtime\n-   [\n    Bun Runtime\n    ](https://bun.sh/docs/runtime)\n-   [\n    Watch Mode\n    ](https://bun.sh/docs/runtime/watch-mode)\n-   [\n    Debugging\n    ](https://bun.sh/docs/runtime/debugger)\n-   [\n    bunfig.toml\n    ](https://bun.sh/docs/runtime/bunfig)\n##### File & Module System\n-   [\n    File Types\n    ](https://bun.sh/docs/runtime/file-types)\n-   [\n    Module Resolution\n    ](https://bun.sh/docs/runtime/module-resolution)\n-   [\n    JSX\n    ](https://bun.sh/docs/runtime/jsx)\n-   [\n    Auto-install\n    ](https://bun.sh/docs/runtime/auto-install)\n-   [\n    Plugins\n    ](https://bun.sh/docs/runtime/plugins)\n-   [\n    File System Router\n    ](https://bun.sh/docs/runtime/file-system-router)\n##### HTTP server\n-   [\n    Server\n    ](https://bun.sh/docs/runtime/http/server)\n-   [\n    Routing\n    ](https://bun.sh/docs/runtime/http/routing)\n-   [\n    Cookies\n    ](https://bun.sh/docs/runtime/http/cookies)\n-   [\n    TLS\n    ](https://bun.sh/docs/runtime/http/tls)\n-   [\n    Error Handling\n    ](https://bun.sh/docs/runtime/http/error-handling)\n-   [\n    Metrics\n    ](https://bun.sh/docs/runtime/http/metrics)\n##### Networking\n-   [\n    Fetch\n    ](https://bun.sh/docs/runtime/networking/fetch)\n-   [\n    WebSockets\n    ](https://bun.sh/docs/runtime/http/websockets)\n-   [\n    TCP\n    ](https://bun.sh/docs/runtime/networking/tcp)\n-   [\n    UDP\n    ](https://bun.sh/docs/runtime/networking/udp)\n-   [\n    DNS\n    ](https://bun.sh/docs/runtime/networking/dns)\n##### Data & Storage\n-   [\n    Cookies\n    ](https://bun.sh/docs/runtime/cookies)\n-   [\n    File I/O\n    ](https://bun.sh/docs/runtime/file-io)\n-   [\n    Streams\n    ](https://bun.sh/docs/runtime/streams)\n-   [\n    Binary Data\n    ](https://bun.sh/docs/runtime/binary-data)\n-   [\n    Archive\n    ](https://bun.sh/docs/runtime/archive)\n-   [\n    SQL\n    ](https://bun.sh/docs/runtime/sql)\n-   [\n    SQLite\n    ](https://bun.sh/docs/runtime/sqlite)\n-   [\n    S3\n    ](https://bun.sh/docs/runtime/s3)\n-   [\n    Redis\n    ](https://bun.sh/docs/runtime/redis)\n##### Concurrency\n-   [\n    Workers\n    ](https://bun.sh/docs/runtime/workers)\n##### Process & System\n-   [\n    Environment Variables\n    ](https://bun.sh/docs/runtime/environment-variables)\n-   [\n    Shell\n    ](https://bun.sh/docs/runtime/shell)\n-   [\n    Spawn\n    ](https://bun.sh/docs/runtime/child-process)\n##### Interop & Tooling\n-   [\n    Node-API\n    ](https://bun.sh/docs/runtime/node-api)\n-   [\n    FFI\n    ](https://bun.sh/docs/runtime/ffi)\n-   [\n    C Compiler\n    ](https://bun.sh/docs/runtime/c-compiler)\n-   [\n    Transpiler\n    ](https://bun.sh/docs/runtime/transpiler)\n##### Utilities\n-   [\n    Secrets\n    ](https://bun.sh/docs/runtime/secrets)\n-   [\n    Console\n    ](https://bun.sh/docs/runtime/console)\n-   [\n    YAML\n    ](https://bun.sh/docs/runtime/yaml)\n-   [\n    Markdown\n    ](https://bun.sh/docs/runtime/markdown)\n-   [\n    JSON5\n    ](https://bun.sh/docs/runtime/json5)\n-   [\n    JSONL\n    ](https://bun.sh/docs/runtime/jsonl)\n-   [\n    HTMLRewriter\n    ](https://bun.sh/docs/runtime/html-rewriter)\n-   [\n    Hashing\n    ](https://bun.sh/docs/runtime/hashing)\n-   [\n    Glob\n    ](https://bun.sh/docs/runtime/glob)\n-   [\n    Semver\n    ](https://bun.sh/docs/runtime/semver)\n-   [\n    Color\n    ](https://bun.sh/docs/runtime/color)\n-   [\n    Utils\n    ](https://bun.sh/docs/runtime/utils)\n##### Standards & Compatibility\n-   [\n    Globals\n    ](https://bun.sh/docs/runtime/globals)\n-   [\n    Bun APIs\n    ](https://bun.sh/docs/runtime/bun-apis)\n-   [\n    Web APIs\n    ](https://bun.sh/docs/runtime/web-apis)\n-   [\n    Node.js Compatibility\n    ](https://bun.sh/docs/runtime/nodejs-compat)\n##### Contributing\n-   [\n    Roadmap\n    ](https://bun.sh/docs/project/roadmap)\n-   [\n    Benchmarking\n    ](https://bun.sh/docs/project/benchmarking)\n-   [\n    Contributing\n    ](https://bun.sh/docs/project/contributing)\n-   [\n    Building Windows\n    ](https://bun.sh/docs/project/building-windows)\n-   [\n    Bindgen\n    ](https://bun.sh/docs/project/bindgen)\n-   [\n    License\n    ](https://bun.sh/docs/project/license)\nOn this page\n-   [Database](#database)\n-   [Strict mode](#strict-mode)\n-   [Load via ES module import](#load-via-es-module-import)\n-   [.close(throwOnError: boolean = false)](#close-throwonerror%3A-boolean-%3D-false)\n-   [using statement](#using-statement)\n-   [.serialize()](#serialize)\n-   [.query()](#query)\n-   [WAL mode](#wal-mode)\n-   [Statements](#statements)\n-   [Binding values](#binding-values)\n-   [strict: true lets you bind values without prefixes](#strict%3A-true-lets-you-bind-values-without-prefixes)\n-   [.all()](#all)\n-   [.get()](#get)\n-   [.run()](#run)\n-   [.as(Class) - Map query results to a class](#as-class-map-query-results-to-a-class)\n-   [.iterate() (@@iterator)](#iterate-%40%40iterator)\n-   [.values()](#values)\n-   [.finalize()](#finalize)\n-   [.toString()](#tostring)\n-   [Parameters](#parameters)\n-   [Integers](#integers)\n-   [safeIntegers: true](#safeintegers%3A-true)\n-   [safeIntegers: false (default)](#safeintegers%3A-false-default)\n-   [Transactions](#transactions)\n-   [.loadExtension()](#loadextension)\n-   [.fileControl(cmd: number, value: any)](#filecontrol-cmd%3A-number%2C-value%3A-any)\n-   [Reference](#reference)\n-   [Datatypes](#datatypes)\nData & Storage\n# SQLite\nCopy page\nBun natively implements a high-performance SQLite3 driver.\nCopy page\nBun natively implements a high-performance [SQLite3](https://www.sqlite.org/) driver. To use it import from the built-in `bun:sqlite` module.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\":memory:\");\nconst query = db.query(\"select 'Hello world' as message;\");\nquery.get();\n```\nCopy\n```\n{ message: \"Hello world\" }\n```\nThe API is simple, synchronous, and fast. Credit to [better-sqlite3](https://github.com/JoshuaWise/better-sqlite3) and its contributors for inspiring the API of `bun:sqlite`. Features include:\n-   Transactions\n-   Parameters (named & positional)\n-   Prepared statements\n-   Datatype conversions (`BLOB` becomes `Uint8Array`)\n-   Map query results to classes without an ORM - `query.as(MyClass)`\n-   The fastest performance of any SQLite driver for JavaScript\n-   `bigint` support\n-   Multi-query statements (e.g. `SELECT 1; SELECT 2;`) in a single call to database.run(query)\nThe `bun:sqlite` module is roughly 3-6x faster than `better-sqlite3` and 8-9x faster than `deno.land/x/sqlite` for read queries. Each driver was benchmarked against the [Northwind Traders](https://github.com/jpwhite3/northwind-SQLite3/blob/46d5f8a64f396f87cd374d1600dbf521523980e8/Northwind_large.sqlite.zip) dataset. View and run the [benchmark source](https://github.com/oven-sh/bun/tree/main/bench/sqlite).\n![SQLite benchmarks for Bun, better-sqlite3, and\ndeno.land/x/sqlite](https://user-images.githubusercontent.com/709451/168459263-8cd51ca3-a924-41e9-908d-cf3478a3b7f3.png)\n---\n##\n[​\n](#database)\nDatabase\nTo open or create a SQLite3 database:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\"mydb.sqlite\");\n```\nTo open an in-memory database:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\n// all of these do the same thing\nconst db = new Database(\":memory:\");\nconst db = new Database();\nconst db = new Database(\"\");\n```\nTo open in `readonly` mode:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\"mydb.sqlite\", { readonly: true });\n```\nTo create the database if the file doesn’t exist:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\"mydb.sqlite\", { create: true });\n```\n###\n[​\n](#strict-mode)\nStrict mode\nBy default, `bun:sqlite` requires binding parameters to include the `$`, `:`, or `@` prefix, and does not throw an error if a parameter is missing. To instead throw an error when a parameter is missing and allow binding without a prefix, set `strict: true` on the `Database` constructor:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst strict = new Database(\":memory:\", { strict: true });\n// throws error because of the typo:\nconst query = strict.query(\"SELECT $message;\").all({ messag: \"Hello world\" });\nconst notStrict = new Database(\":memory:\");\n// does not throw error:\nnotStrict.query(\"SELECT $message;\").all({ messag: \"Hello world\" });\n```\n###\n[​\n](#load-via-es-module-import)\nLoad via ES module import\nYou can also use an import attribute to load a database.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport db from \"./mydb.sqlite\" with { type: \"sqlite\" };\nconsole.log(db.query(\"select * from users LIMIT 1\").get());\n```\nThis is equivalent to the following:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\"./mydb.sqlite\");\n```\n###\n[​\n](#close-throwonerror:-boolean-=-false)\n`.close(throwOnError: boolean = false)`\nTo close a database connection, but allow existing queries to finish, call `.close(false)`:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst db = new Database();\n// ... do stuff\ndb.close(false);\n```\nTo close the database and throw an error if there are any pending queries, call `.close(true)`:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst db = new Database();\n// ... do stuff\ndb.close(true);\n```\n`close(false)` is called automatically when the database is garbage collected. It is safe to call multiple times but has no effect after the first.\n###\n[​\n](#using-statement)\n`using` statement\nYou can use the `using` statement to ensure that a database connection is closed when the `using` block is exited.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\n{\n  using db = new Database(\"mydb.sqlite\");\n  using query = db.query(\"select 'Hello world' as message;\");\n  console.log(query.get());\n}\n```\nCopy\n```\n{ message: \"Hello world\" }\n```\n###\n[​\n](#serialize)\n`.serialize()`\n`bun:sqlite` supports SQLite’s built-in mechanism for [serializing](https://www.sqlite.org/c3ref/serialize.html) and [deserializing](https://www.sqlite.org/c3ref/deserialize.html) databases to and from memory.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst olddb = new Database(\"mydb.sqlite\");\nconst contents = olddb.serialize(); // => Uint8Array\nconst newdb = Database.deserialize(contents);\n```\nInternally, `.serialize()` calls [`sqlite3_serialize`](https://www.sqlite.org/c3ref/serialize.html).\n###\n[​\n](#query)\n`.query()`\nUse the `db.query()` method on your `Database` instance to [prepare](https://www.sqlite.org/c3ref/prepare.html) a SQL query. The result is a `Statement` instance that will be cached on the `Database` instance. _The query will not be executed._\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`select \"Hello world\" as message`);\n```\n**What does “cached” mean?**The caching refers to the **compiled prepared statement** (the SQL bytecode), not the query results. When you call `db.query()` with the same SQL string multiple times, Bun returns the same cached `Statement` object instead of recompiling the SQL.It is completely safe to reuse a cached statement with different parameter values:\nCopy\n```\nconst query = db.query(\"SELECT * FROM users WHERE id = ?\");\nquery.get(1); // ✓ Works\nquery.get(2); // ✓ Also works - parameters are bound fresh each time\nquery.get(3); // ✓ Still works\n```\nUse `.prepare()` instead of `.query()` when you want a fresh `Statement` instance that isn’t cached, for example if you’re dynamically generating SQL and don’t want to fill the cache with one-off queries.\nCopy\n```\n// compile the prepared statement without caching\nconst query = db.prepare(\"SELECT * FROM foo WHERE bar = ?\");\n```\n---\n##\n[​\n](#wal-mode)\nWAL mode\nSQLite supports [write-ahead log mode](https://www.sqlite.org/wal.html) (WAL) which dramatically improves performance, especially in situations with many concurrent readers and a single writer. It’s broadly recommended to enable WAL mode for most typical applications. To enable WAL mode, run this pragma query at the beginning of your application:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\ndb.run(\"PRAGMA journal_mode = WAL;\");\n```\nWhat is WAL mode?\nIn WAL mode, writes to the database are written directly to a separate file called the “WAL file” (write-ahead log). This file will be later integrated into the main database file. Think of it as a buffer for pending writes. Refer to the [SQLite docs](https://www.sqlite.org/wal.html) for a more detailed overview.On macOS, WAL files may be persistent by default. This is not a bug, it is how macOS configured the system version of SQLite.\n---\n##\n[​\n](#statements)\nStatements\nA `Statement` is a _prepared query_, which means it’s been parsed and compiled into an efficient binary form. It can be executed multiple times in a performant way. Create a statement with the `.query` method on your `Database` instance.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`select \"Hello world\" as message`);\n```\nQueries can contain parameters. These can be numerical (`?1`) or named (`$param` or `:param` or `@param`).\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`SELECT ?1, ?2;`);\nconst query = db.query(`SELECT $param1, $param2;`);\n```\nValues are bound to these parameters when the query is executed. A `Statement` can be executed with several different methods, each returning the results in a different form.\n###\n[​\n](#binding-values)\nBinding values\nTo bind values to a statement, pass an object to the `.all()`, `.get()`, `.run()`, or `.values()` method.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`select $message;`);\nquery.all({ $message: \"Hello world\" });\n```\nYou can bind using positional parameters too:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`select ?1;`);\nquery.all(\"Hello world\");\n```\n####\n[​\n](#strict:-true-lets-you-bind-values-without-prefixes)\n`strict: true` lets you bind values without prefixes\nBy default, the `$`, `:`, and `@` prefixes are **included** when binding values to named parameters. To bind without these prefixes, use the `strict` option in the `Database` constructor.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\":memory:\", {\n  // bind values without prefixes\n  strict: true,\n});\nconst query = db.query(`select $message;`);\n// strict: true\nquery.all({ message: \"Hello world\" });\n// strict: false\n// query.all({ $message: \"Hello world\" });\n```\n###\n[​\n](#all)\n`.all()`\nUse `.all()` to run a query and get back the results as an array of objects.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`select $message;`);\nquery.all({ $message: \"Hello world\" });\n```\nCopy\n```\n[{ message: \"Hello world\" }]\n```\nInternally, this calls [`sqlite3_reset`](https://www.sqlite.org/capi3ref.html#sqlite3_reset) and repeatedly calls [`sqlite3_step`](https://www.sqlite.org/capi3ref.html#sqlite3_step) until it returns `SQLITE_DONE`.\n###\n[​\n](#get)\n`.get()`\nUse `.get()` to run a query and get back the first result as an object.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`select $message;`);\nquery.get({ $message: \"Hello world\" });\n```\nCopy\n```\n{ $message: \"Hello world\" }\n```\nInternally, this calls [`sqlite3_reset`](https://www.sqlite.org/capi3ref.html#sqlite3_reset) followed by [`sqlite3_step`](https://www.sqlite.org/capi3ref.html#sqlite3_step) until it no longer returns `SQLITE_ROW`. If the query returns no rows, `undefined` is returned.\n###\n[​\n](#run)\n`.run()`\nUse `.run()` to run a query and get back an object with execution metadata. This is useful for schema-modifying queries (e.g. `CREATE TABLE`) or bulk write operations.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`create table foo;`);\nquery.run();\n```\nCopy\n```\n{\n  lastInsertRowid: 0,\n  changes: 0,\n}\n```\nInternally, this calls [`sqlite3_reset`](https://www.sqlite.org/capi3ref.html#sqlite3_reset) and calls [`sqlite3_step`](https://www.sqlite.org/capi3ref.html#sqlite3_step) once. Stepping through all the rows is not necessary when you don’t care about the results. The `lastInsertRowid` property returns the ID of the last row inserted into the database. The `changes` property is the number of rows affected by the query.\n###\n[​\n](#as-class-map-query-results-to-a-class)\n`.as(Class)` - Map query results to a class\nUse `.as(Class)` to run a query and get back the results as instances of a class. This lets you attach methods & getters/setters to results.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nclass Movie {\n  title: string;\n  year: number;\n  get isMarvel() {\n    return this.title.includes(\"Marvel\");\n  }\n}\nconst query = db.query(\"SELECT title, year FROM movies\").as(Movie);\nconst movies = query.all();\nconst first = query.get();\nconsole.log(movies[0].isMarvel);\nconsole.log(first.isMarvel);\n```\nCopy\n```\ntrue\ntrue\n```\nAs a performance optimization, the class constructor is not called, default initializers are not run, and private fields are not accessible. This is more like using `Object.create` than `new`. The class’s prototype is assigned to the object, methods are attached, and getters/setters are set up, but the constructor is not called. The database columns are set as properties on the class instance.\n###\n[​\n](#iterate-@@iterator)\n`.iterate()` (`@@iterator`)\nUse `.iterate()` to run a query and incrementally return results. This is useful for large result sets that you want to process one row at a time without loading all the results into memory.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(\"SELECT * FROM foo\");\nfor (const row of query.iterate()) {\n  console.log(row);\n}\n```\nYou can also use the `@@iterator` protocol:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(\"SELECT * FROM foo\");\nfor (const row of query) {\n  console.log(row);\n}\n```\n###\n[​\n](#values)\n`.values()`\nUse `values()` to run a query and get back all results as an array of arrays.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(`select $message;`);\nquery.values({ $message: \"Hello world\" });\nquery.values(2);\n```\nCopy\n```\n[\n  [ \"Iron Man\", 2008 ],\n  [ \"The Avengers\", 2012 ],\n  [ \"Ant-Man: Quantumania\", 2023 ],\n]\n```\nInternally, this calls [`sqlite3_reset`](https://www.sqlite.org/capi3ref.html#sqlite3_reset) and repeatedly calls [`sqlite3_step`](https://www.sqlite.org/capi3ref.html#sqlite3_step) until it returns `SQLITE_DONE`.\n###\n[​\n](#finalize)\n`.finalize()`\nUse `.finalize()` to destroy a `Statement` and free any resources associated with it. Once finalized, a `Statement` cannot be executed again. Typically, the garbage collector will do this for you, but explicit finalization may be useful in performance-sensitive applications.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(\"SELECT title, year FROM movies\");\nconst movies = query.all();\nquery.finalize();\n```\n###\n[​\n](#tostring)\n`.toString()`\nCalling `toString()` on a `Statement` instance prints the expanded SQL query. This is useful for debugging.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\n// setup\nconst query = db.query(\"SELECT $param;\");\nconsole.log(query.toString()); // => \"SELECT NULL\"\nquery.run(42);\nconsole.log(query.toString()); // => \"SELECT 42\"\nquery.run(365);\nconsole.log(query.toString()); // => \"SELECT 365\"\n```\nInternally, this calls [`sqlite3_expanded_sql`](https://www.sqlite.org/capi3ref.html#sqlite3_expanded_sql). The parameters are expanded using the most recently bound values.\n##\n[​\n](#parameters)\nParameters\nQueries can contain parameters. These can be numerical (`?1`) or named (`$param` or `:param` or `@param`). Bind values to these parameters when executing the query:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)query.ts\nCopy\n```\nconst query = db.query(\"SELECT * FROM foo WHERE bar = $bar\");\nconst results = query.all({\n  $bar: \"bar\",\n});\n```\nCopy\n```\n[{ \"$bar\": \"bar\" }]\n```\nNumbered (positional) parameters work too:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst query = db.query(\"SELECT ?1, ?2\");\nconst results = query.all(\"hello\", \"goodbye\");\n```\nCopy\n```\n[\n\t{\n\t\t\"?1\": \"hello\",\n\t\t\"?2\": \"goodbye\",\n\t},\n];\n```\n---\n##\n[​\n](#integers)\nIntegers\nsqlite supports signed 64 bit integers, but JavaScript only supports signed 52 bit integers or arbitrary precision integers with `bigint`. `bigint` input is supported everywhere, but by default `bun:sqlite` returns integers as `number` types. If you need to handle integers larger than 2^53, set `safeIntegers` option to `true` when creating a `Database` instance. This also validates that `bigint` passed to `bun:sqlite` do not exceed 64 bits. By default, `bun:sqlite` returns integers as `number` types. If you need to handle integers larger than 2^53, you can use the `bigint` type.\n###\n[​\n](#safeintegers:-true)\n`safeIntegers: true`\nWhen `safeIntegers` is `true`, `bun:sqlite` will return integers as `bigint` types:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\":memory:\", { safeIntegers: true });\nconst query = db.query(`SELECT ${BigInt(Number.MAX_SAFE_INTEGER) + 102n} as max_int`);\nconst result = query.get();\nconsole.log(result.max_int);\n```\nCopy\n```\n9007199254741093n\n```\nWhen `safeIntegers` is `true`, `bun:sqlite` will throw an error if a `bigint` value in a bound parameter exceeds 64 bits:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\":memory:\", { safeIntegers: true });\ndb.run(\"CREATE TABLE test (id INTEGER PRIMARY KEY, value INTEGER)\");\nconst query = db.query(\"INSERT INTO test (value) VALUES ($value)\");\ntry {\n  query.run({ $value: BigInt(Number.MAX_SAFE_INTEGER) ** 2n });\n} catch (e) {\n  console.log(e.message);\n}\n```\nCopy\n```\nBigInt value '81129638414606663681390495662081' is out of range\n```\n###\n[​\n](#safeintegers:-false-default)\n`safeIntegers: false` (default)\nWhen `safeIntegers` is `false`, `bun:sqlite` will return integers as `number` types and truncate any bits beyond 53:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database(\":memory:\", { safeIntegers: false });\nconst query = db.query(`SELECT ${BigInt(Number.MAX_SAFE_INTEGER) + 102n} as max_int`);\nconst result = query.get();\nconsole.log(result.max_int);\n```\nCopy\n```\n9007199254741092\n```\n---\n##\n[​\n](#transactions)\nTransactions\nTransactions are a mechanism for executing multiple queries in an _atomic_ way; that is, either all of the queries succeed or none of them do. Create a transaction with the `db.transaction()` method:\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst insertCat = db.prepare(\"INSERT INTO cats (name) VALUES ($name)\");\nconst insertCats = db.transaction(cats => {\n  for (const cat of cats) insertCat.run(cat);\n});\n```\nAt this stage, we haven’t inserted any cats! The call to `db.transaction()` returns a new function (`insertCats`) that _wraps_ the function that executes the queries. To execute the transaction, call this function. All arguments will be passed through to the wrapped function; the return value of the wrapped function will be returned by the transaction function. The wrapped function also has access to the `this` context as defined where the transaction is executed.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nconst insert = db.prepare(\"INSERT INTO cats (name) VALUES ($name)\");\nconst insertCats = db.transaction(cats => {\n  for (const cat of cats) insert.run(cat);\n  return cats.length;\n});\nconst count = insertCats([{ $name: \"Keanu\" }, { $name: \"Salem\" }, { $name: \"Crookshanks\" }]);\nconsole.log(`Inserted ${count} cats`);\n```\nThe driver will automatically [`begin`](https://www.sqlite.org/lang_transaction.html) a transaction when `insertCats` is called and `commit` it when the wrapped function returns. If an exception is thrown, the transaction will be rolled back. The exception will propagate as usual; it is not caught.\n**Nested transactions** — Transaction functions can be called from inside other transaction functions. When doing so, the inner transaction becomes a [savepoint](https://www.sqlite.org/lang_savepoint.html).View nested transaction example\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\n// setup\nimport { Database } from \"bun:sqlite\";\nconst db = Database.open(\":memory:\");\ndb.run(\"CREATE TABLE expenses (id INTEGER PRIMARY KEY AUTOINCREMENT, note TEXT, dollars INTEGER);\");\ndb.run(\"CREATE TABLE cats (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT UNIQUE, age INTEGER)\");\nconst insertExpense = db.prepare(\"INSERT INTO expenses (note, dollars) VALUES (?, ?)\");\nconst insert = db.prepare(\"INSERT INTO cats (name, age) VALUES ($name, $age)\");\nconst insertCats = db.transaction(cats => {\n  for (const cat of cats) insert.run(cat);\n});\nconst adopt = db.transaction(cats => {\n  insertExpense.run(\"adoption fees\", 20);\n  insertCats(cats); // nested transaction\n});\nadopt([\n  { $name: \"Joey\", $age: 2 },\n  { $name: \"Sally\", $age: 4 },\n  { $name: \"Junior\", $age: 1 },\n]);\n```\nTransactions also come with `deferred`, `immediate`, and `exclusive` versions.\nCopy\n```\ninsertCats(cats); // uses \"BEGIN\"\ninsertCats.deferred(cats); // uses \"BEGIN DEFERRED\"\ninsertCats.immediate(cats); // uses \"BEGIN IMMEDIATE\"\ninsertCats.exclusive(cats); // uses \"BEGIN EXCLUSIVE\"\n```\n###\n[​\n](#loadextension)\n`.loadExtension()`\nTo load a [SQLite extension](https://www.sqlite.org/loadext.html), call `.loadExtension(name)` on your `Database` instance\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nconst db = new Database();\ndb.loadExtension(\"myext\");\n```\n**MacOS users** By default, macOS ships with Apple’s proprietary build of SQLite, which doesn’t support extensions. To use extensions, you’ll need to install a vanilla build of SQLite.\nterminal\nCopy\n```\nbrew install sqlite\nwhich sqlite # get path to binary\n```\nTo point `bun:sqlite` to the new build, call `Database.setCustomSQLite(path)` before creating any `Database` instances. (On other operating systems, this is a no-op.) Pass a path to the SQLite `.dylib` file, _not_ the executable. With recent versions of Homebrew this is something like `/opt/homebrew/Cellar/sqlite/<version>/libsqlite3.dylib`.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database } from \"bun:sqlite\";\nDatabase.setCustomSQLite(\"/path/to/libsqlite.dylib\");\nconst db = new Database();\ndb.loadExtension(\"myext\");\n```\n###\n[​\n](#filecontrol-cmd:-number,-value:-any)\n`.fileControl(cmd: number, value: any)`\nTo use the advanced `sqlite3_file_control` API, call `.fileControl(cmd, value)` on your `Database` instance.\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)db.ts\nCopy\n```\nimport { Database, constants } from \"bun:sqlite\";\nconst db = new Database();\n// Ensure WAL mode is NOT persistent\n// this prevents wal files from lingering after the database is closed\ndb.fileControl(constants.SQLITE_FCNTL_PERSIST_WAL, 0);\n```\n`value` can be:\n-   `number`\n-   `TypedArray`\n-   `undefined` or `null`\n---\n##\n[​\n](#reference)\nReference\n![https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240](https://mintcdn.com/bun-1dd33a4e/Hq64iapoQXHbYMEN/icons/typescript.svg?fit=max&auto=format&n=Hq64iapoQXHbYMEN&q=85&s=c6cceedec8f82d2cc803d7c6ec82b240)Type Reference\nCopy\n```\nclass Database {\n  constructor(\n    filename: string,\n    options?:\n      | number\n      | {\n          readonly?: boolean;\n          create?: boolean;\n          readwrite?: boolean;\n          safeIntegers?: boolean;\n          strict?: boolean;\n        },\n  );\n  query<ReturnType, ParamsType>(sql: string): Statement<ReturnType, ParamsType>;\n  prepare<ReturnType, ParamsType>(sql: string): Statement<ReturnType, ParamsType>;\n  run(sql: string, params?: SQLQueryBindings): { lastInsertRowid: number; changes: number };\n  exec = this.run;\n  transaction(insideTransaction: (...args: any) => void): CallableFunction & {\n    deferred: (...args: any) => void;\n    immediate: (...args: any) => void;\n    exclusive: (...args: any) => void;\n  };\n  close(throwOnError?: boolean): void;\n}\nclass Statement<ReturnType, ParamsType> {\n  all(...params: ParamsType[]): ReturnType[];\n  get(...params: ParamsType[]): ReturnType | null;\n  run(...params: ParamsType[]): {\n    lastInsertRowid: number;\n    changes: number;\n  };\n  values(...params: ParamsType[]): unknown[][];\n  finalize(): void; // destroy statement and clean up resources\n  toString(): string; // serialize to SQL\n  columnNames: string[]; // the column names of the result set\n  columnTypes: string[]; // types based on actual values in first row (call .get()/.all() first)\n  declaredTypes: (string | null)[]; // types from CREATE TABLE schema (call .get()/.all() first)\n  paramsCount: number; // the number of parameters expected by the statement\n  native: any; // the native object representing the statement\n  as<T>(Class: new (...args: any[]) => T): Statement<T, ParamsType>;\n}\ntype SQLQueryBindings =\n  | string\n  | bigint\n  | TypedArray\n  | number\n  | boolean\n  | null\n  | Record<string, string | bigint | TypedArray | number | boolean | null>;\n```\nSee all 57 lines\n###\n[​\n](#datatypes)\nDatatypes\n| JavaScript type | SQLite type |\n| --- | --- |\n| `string` | `TEXT` |\n| `number` | `INTEGER` or `DECIMAL` |\n| `boolean` | `INTEGER` (1 or 0) |\n| `Uint8Array` | `BLOB` |\n| `Buffer` | `BLOB` |\n| `bigint` | `INTEGER` |\n| `null` | `NULL` |\nWas this page helpful?\nYesNo\n[Suggest edits](https://github.com/oven-sh/bun/edit/main/docs/runtime/sqlite.mdx)[Raise issue](https://github.com/oven-sh/bun/issues/new?title=Issue on docs&body=Path: /runtime/sqlite)\n[\nSQL\nPrevious\n](https://bun.sh/docs/runtime/sql)[\nS3\nNext\n](https://bun.sh/docs/runtime/s3)\n⌘I\n[x](https://x.com/bunjavascript)[github](https://github.com/oven-sh/bun)[discord](https://bun.com/discord)[youtube](https://www.youtube.com/@bunjs)\n[Powered by](https://www.mintlify.com?utm_campaign=poweredBy&utm_medium=referral&utm_source=bun-1dd33a4e)",
  "timestamp": 1769987720657,
  "title": "SQLite - Bun"
}