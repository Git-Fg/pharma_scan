{
  "url": "https://patrol.leancode.co/cli-commands/test",
  "markdown": "# test | Patrol\nCLI commands\n[\nGitHubleancodepl/patrol\n1.2K\n](https://github.com/leancodepl/patrol)\n[Follow us on X!](https://x.com/patrol_leancode)[Discord](https://discord.gg/ukBK5t4EZg)[patrol API reference](https://pub.dev/documentation/patrol/latest/index.html)[patrol\\_finders API reference](https://pub.dev/documentation/patrol_finders/latest/index.html)\nCLI commands\n[develop](https://patrol.leancode.co/cli-commands)[test](https://patrol.leancode.co/cli-commands/test)[build](https://patrol.leancode.co/cli-commands/build)[doctor](https://patrol.leancode.co/cli-commands/doctor)[update](https://patrol.leancode.co/cli-commands/update)[devices](https://patrol.leancode.co/cli-commands/devices)\n[\n![Patrol Icon](https://patrol.leancode.co/_next/static/media/patrol_icon.94a710ce.svg)Patrol\n](https://patrol.leancode.co/)\nSearch\nâŒ˜K\n[\nGitHubleancodepl/patrol\n1.2K\n](https://github.com/leancodepl/patrol)\n[Overview](https://patrol.leancode.co/)[Documentation](https://patrol.leancode.co/documentation)[CLI commands](https://patrol.leancode.co/cli-commands)[Patrol Feature Guide](https://patrol.leancode.co/feature-guide)[Articles & Resources](https://patrol.leancode.co/articles)[Pricing](https://patrol.leancode.co/pricing)[Contact us](https://patrol.leancode.co/contact)\ntest\n# test\n### [Synopsis](#synopsis)\nRun integration tests.\n```\npatrol test\n```\nTo see all available options and flags, run `patrol test --help`.\n### [Description](#description)\nThis command is the one use you'll be using most often.\n`patrol test` does the following things:\n1.  Builds the app under test (AUT) and the instrumentation app\n2.  Installs the AUT and the instrumentation on the selected device\n3.  Runs the tests natively, and reports results back in native format.\nUnder the hood, it calls Gradle (when testing on Android) and `xcodebuild` (when testing on iOS).\n### [Discussion](#discussion)\nBy default, `patrol test` runs all integration tests (files ending with `_test.dart` located in the `patrol_test` directory). You can customize the test directory by setting `test_directory` in your `pubspec.yaml` under the `patrol` section.\nTo run a single test, use `--target`:\n```\npatrol test --target patrol_test/login_test.dart\n```\nYou can use `--target` more than once to run multiple tests:\n```\npatrol test \\\n  --target patrol_test/login_test.dart \\\n  --target patrol_test/app_test.dart\n```\nOr alternatively:\n```\npatrol test --targets patrol_test/login_test.dart,patrol_test/app_test.dart\n```\nTest files must end with `_test.dart`. Otherwise the file is not considered a test and is not run.\nThere's no difference between `--target` and `--targets`.\n### [Tags](#tags)\nYou can use tags to run only tests with specific tags.\nFirst specify tags in your patrol tests:\n```\n  patrol(\n    'example test with tag',\n    tags: ['android'],\n    ($) async {\n      await createApp($);\n      await $(FloatingActionButton).tap();\n      expect($(#counterText).text, '1');\n    },\n  );\n  patrol(\n    'example test with two tags',\n    tags: ['android', 'ios'],\n    ($) async {\n      await createApp($);\n      await $(FloatingActionButton).tap();\n      expect($(#counterText).text, '1');\n    },\n  );\n```\nThen you can run tests with the tags you specified:\n```\npatrol test --tags android\npatrol test --tags=android\npatrol test --tags='android||ios'\npatrol test --tags='(android || ios)'\npatrol test --tags='(android && tablet)'\n```\nYou can also use `--exclude-tags` to exclude tests with specific tags:\n```\npatrol test --exclude-tags android\npatrol test --exclude-tags='(android||ios)'\n```\nFor comprehensive information about tag syntax, complex expressions, and advanced usage, see the [Patrol tags documentation](https://patrol.leancode.co/documentation/patrol-tags).\n### [Coverage](#coverage)\nCoverage collection is currently not supported on macOS.\nTo collect coverage from patrol tests, use `--coverage`.\n```\npatrol test --coverage\n```\nThe LCOV report will be saved to `/coverage/patrol_lcov.info`.\nAdditionally, you can exclude certain files from the report using glob patterns and `--coverage-ignore` option. For instance,\n```\npatrol test --coverage --coverage-ignore=\"**/*.g.dart\"\n```\nexcludes all files ending with `.g.dart`.\n### [Build versioning](#build-versioning)\nYou can specify custom build number and build name using the `--build-name` and `--build-number` flags. These work the same as in Flutter CLI:\n-   `--build-name`: Version name of the app. (e.g. `1.2.3`)\n-   `--build-number`: Version code of the app. (e.g. `123`)\n```\npatrol test --build-name=1.2.3 --build-number=123\npatrol test --target patrol_test/login_test.dart --build-name=1.2.3 --build-number=123\n```\n### [Isolation of test runs](#isolation-of-test-runs)\nTo achieve full isolation between test runs:\n-   On Android: set `clearPackageData` to `true` in your `build.gradle` file,\n-   On iOS Simulator: use the `--full-isolation` flag\nThis functionality is experimental on iOS and might be removed in the future releases.\n```\npatrol test --full-isolation\n```\n### [Web Platform](#web-platform)\nPatrol supports running tests on Flutter web using Playwright. To run tests on web:\n```\npatrol test --device chrome\n```\nWhen running on web:\n-   Tests execute in Chromium browser via Playwright\n-   CLI arguments can be used to configure Playwright\n-   Test results are generated in `test-results/`\n#### [Arguments](#arguments)\nPlaywright configuration is updated with values passed to the command. This allows direct control over Playwright features such as reporting. To see the full list of supported arguments, run `patrol test --help`.\n**Note:** Some arguments are not supported on web:\n-   `--flavor`: Flavors are not supported for Flutter web\n-   `--uninstall`: Not applicable to web platform\n-   `--clear-permissions`: Not applicable to web platform\n-   `--full-isolation`: Not applicable to web platform\n### [Under the hood](#under-the-hood)\n`patrol test` basically calls `patrol build` and then runs the built app binaries. For more info, read [docs of `patrol build`](https://patrol.leancode.co/cli-commands/build).\n[\ndevelop\nPrevious Page\n](https://patrol.leancode.co/cli-commands)[\nbuild\nNext Page\n](https://patrol.leancode.co/cli-commands/build)\n### On this page\n[\nSynopsis](#synopsis)[\nDescription](#description)[\nDiscussion](#discussion)[\nTags](#tags)[\nCoverage](#coverage)[\nBuild versioning](#build-versioning)[\nIsolation of test runs](#isolation-of-test-runs)[\nWeb Platform](#web-platform)[\nArguments](#arguments)[\nUnder the hood](#under-the-hood)",
  "timestamp": 1769987724805,
  "title": "test | Patrol"
}