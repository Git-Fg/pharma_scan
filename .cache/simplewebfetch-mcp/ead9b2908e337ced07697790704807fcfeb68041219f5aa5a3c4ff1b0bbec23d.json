{
  "url": "https://docs.objectbox.io/advanced/data-model-updates",
  "markdown": "# Data Model Updates | ObjectBox Docs\nbars[![](https://docs.objectbox.io/~gitbook/image?url=https%3A%2F%2F4174656640-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-LETufmyus5LFkviJjr4%252Favatar.png%3Fgeneration%3D1528453316288221%26alt%3Dmedia&width=32&dpr=3&quality=100&sign=96b28d45&sv=2)![](https://docs.objectbox.io/~gitbook/image?url=https%3A%2F%2F4174656640-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-LETufmyus5LFkviJjr4%252Favatar.png%3Fgeneration%3D1528453316288221%26alt%3Dmedia&width=32&dpr=3&quality=100&sign=96b28d45&sv=2)\nObjectBox Docs\n](https://docs.objectbox.io/)\nsearch\ncircle-xmark\n⌘Ctrlk\n[Home](https://objectbox.io/)[Blog](https://objectbox.io/blog/)[Twitter](https://twitter.com/ObjectBox_io)[GitHub](https://github.com/objectbox/objectbox-java)\nMoreellipsischevron-down\n[![](https://docs.objectbox.io/~gitbook/image?url=https%3A%2F%2F4174656640-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-LETufmyus5LFkviJjr4%252Favatar.png%3Fgeneration%3D1528453316288221%26alt%3Dmedia&width=32&dpr=3&quality=100&sign=96b28d45&sv=2)![](https://docs.objectbox.io/~gitbook/image?url=https%3A%2F%2F4174656640-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-LETufmyus5LFkviJjr4%252Favatar.png%3Fgeneration%3D1528453316288221%26alt%3Dmedia&width=32&dpr=3&quality=100&sign=96b28d45&sv=2)\nObjectBox Docs\n](https://docs.objectbox.io/)\n-   [ObjectBox Docs](https://docs.objectbox.io/)\n-   [Getting started](https://docs.objectbox.io/getting-started)\n-   [Tutorial: Demo Project](https://docs.objectbox.io/tutorial-demo-project)\n-   [Entity Annotations](https://docs.objectbox.io/entity-annotations)\n-   [Property Types](https://docs.objectbox.io/property-types)\n-   [Android (Java/Kotlin)chevron-right](https://docs.objectbox.io/android)\n-   [Desktop Apps](https://docs.objectbox.io/java-desktop-apps)\n-   [Kotlin Support](https://docs.objectbox.io/kotlin-support)\n-   [ObjectBox Queries](https://docs.objectbox.io/queries)\n-   [On-Device Vector Search](https://docs.objectbox.io/on-device-vector-search)\n-   [Data Observers & Rx](https://docs.objectbox.io/data-observers-and-rx)\n-   [Relations](https://docs.objectbox.io/relations)\n-   [ObjectBox Admin](https://docs.objectbox.io/data-browser)\n-   [Transactions](https://docs.objectbox.io/transactions)\n-   [Advancedchevron-right](https://docs.objectbox.io/advanced)\n    -   [Advanced Setup](https://docs.objectbox.io/advanced/advanced-setup)\n    -   [Object IDs](https://docs.objectbox.io/advanced/object-ids)\n    -   [Custom Types](https://docs.objectbox.io/advanced/custom-types)\n    -   [Entity Inheritance](https://docs.objectbox.io/advanced/entity-inheritance)\n    -   [Data Model Updates](https://docs.objectbox.io/advanced/data-model-updates)\n    -   [Meta Model, IDs, and UIDs](https://docs.objectbox.io/advanced/meta-model-ids-and-uids)\n-   [Changelogs](https://docs.objectbox.io/changelogs)\n-   [Java API referencearrow-up-right](https://objectbox.io/docfiles/java/current/)\n-   [Dart API referencearrow-up-right](https://pub.dev/documentation/objectbox/latest/objectbox/objectbox-library.html)\n-   [Python API referencearrow-up-right](https://objectbox.io/docfiles/python/current/)\n-   [Binary Licensearrow-up-right](https://objectbox.io/0209-ob-binary-license/)\n-   [FAQ](https://docs.objectbox.io/faq)\n-   [Troubleshooting](https://docs.objectbox.io/troubleshooting)\n-   [Data Syncarrow-up-right](https://objectbox.io/sync/)\n-   [Swift Database for iOSarrow-up-right](https://swift.objectbox.io/)\n-   [C++ Database Docsarrow-up-right](https://cpp.objectbox.io/)\n-   [Java Release History (<= v1.5)](https://docs.objectbox.io/release-history)\nchevron-upchevron-down\n[gitbookPowered by GitBook](https://www.gitbook.com/?utm_source=content&utm_medium=trademark&utm_campaign=-LETufmyus5LFkviJjr4)\nxmark\nblock-quoteOn this pagechevron-down\ncopyCopychevron-down\n1.  [Advanced](https://docs.objectbox.io/advanced)\n# Data Model Updates\nHow to rename entities and properties, change property types in ObjectBox.\n##\n[hashtag](#objectbox-data-model-updates)\nObjectBox - Data Model Updates\nObjectBox manages its data model (schema) mostly automatically. The data model is defined by the entity classes you define. When you **add or remove** entities or properties of your entities, **ObjectBox takes care** of those changes without any further action from you.\nFor other changes like **renaming or changing the type**, ObjectBox needs **extra information** to make things unambiguous. This is done by setting a unique ID (UIDs) as an annotation, as we will see below.\n##\n[hashtag](#uids)\nUIDs\nObjectBox keeps track of entities and properties by assigning them unique IDs (UIDs). All those UIDs are stored in a file `objectbox-models/default.json` (Java, Kotlin) or `lib/objectbox-model.json` (Dart) which you should add to your version control system (e.g. git). If you are interested, we have [in-depth documentation on UIDs and concepts](https://docs.objectbox.io/advanced/meta-model-ids-and-uids). But let’s continue with how to rename entities or properties.\n**In short:** To make UID-related changes, put an `@Uid` annotation (Java, Kotlin) or `@Entity(uid: 0)/@Property(uid: 0)` (Dart) on the entity or property and build the project to get further instructions. Repeat for each entity or property to change.\n##\n[hashtag](#renaming-entities-and-properties)\nRenaming Entities and Properties\nSo why do we need that UID annotation? If you simply rename an entity class, ObjectBox only sees that the old entity is gone and a new entity is available. This can be interpreted in two ways:\n-   The old entity is removed and a new entity should be added, the old data is discarded. This is the **default behavior** of ObjectBox.\n-   The entity was renamed, the old data should be re-used.\nSo to tell ObjectBox to do a rename instead of discarding your old entity and data, you need to make sure it knows that this is the same entity and not a new one. You do that by attaching the internal UID to the entity.\nThe same is true for properties.\nNow let’s walk through how to do that. The process works the same if you want to rename a property:\n###\n[hashtag](#how-to-and-example-java-kotlin-and-dart)\nHow-to and Example (Java/Kotlin and Dart)\n**Step 1:** Add an empty UID to the entity/property you want to rename:\nJava/Kotlin\nDart\n**Step 2:** Build the project (in Dart, run `pub run build_runner build`). The build will fail with an error message that gives you the current UID of the entity/property:\nJava/Kotlin\nDart\n**Step 3:** Apply the UID from the \\[Rename\\] section of the error message to your entity/property:\nJava/Kotlin\nDart\n**Step 4:** The last thing to do is the actual rename on the language level (Java, Kotlin, etc.):\nJava/Kotlin\nDart\n**Step 5:** Build the project again, it should now succeed. You can now use your renamed entity/property as expected and all existing data will still be there.\n**Repeat** the steps above to rename another entity or property.\ncircle-info\nNote: Instead of the above you can also find the UID of the entity/property in the model JSON mentioned in the introduction. You can add the UID value to the annotation yourself, before renaming the entity/property, and skip the intermediate error where ObjectBox just prints it for you. This can be **faster when renaming multiple properties**.\n###\n[hashtag](#how-to-and-example-python)\nHow-to and Example (Python)\nSince in Python there isn't a build step, the steps for renaming an Entity are different. Say we want to rename the Entity `MyName` to `MyNewName`:\n**Step 1**: Find out the UID of the entity `MyName`:\n**Step 2**: Rename `MyName` to `MyNewName` and explicitly specify the old UID:\nThis makes possible for Objectbox to associate the old entity to the new one, and retain persisted data. If you don't specify the old UID, Objectbox will discard the old data and add a fresh new entity called `MyNameName` to the schema.\n##\n[hashtag](#changing-property-types)\nChanging Property Types\ncircle-exclamation\nObjectBox does not support migrating existing property data to a new type. You will have to take care of this yourself, e.g. by keeping the old property and adding some migration logic.\nThere are two solutions to changing the type of a property:\n-   Add a new property with a different name (this only works if the property has no @Uid annotation already):\n-   Set a new UID for the property so ObjectBox treats it as a new property. Let’s walk through how to do that:\n###\n[hashtag](#how-to-and-example)\nHow-to and Example\n**Step 1:** Add the `@Uid` annotation to the property where you want to change the type:\nJava/Kotlin\nDart\n**Step 2:** Build the project. The build will fail with an error message that gives you a newly created UID value:\nJava/Kotlin\nDart\n**Step 3:** Apply the UID from the \\[Change/reset\\] section to your property:\nJava/Kotlin\nDart\n**Step 4:** Build the project again, it should now succeed. You can now use the property in your entity as if it were a new one.\n**Repeat** the steps above to change the type of another property.\n[PreviousEntity Inheritancechevron-left](https://docs.objectbox.io/advanced/entity-inheritance)[NextMeta Model, IDs, and UIDschevron-right](https://docs.objectbox.io/advanced/meta-model-ids-and-uids)\nLast updated 1 year ago\nWas this helpful?\n-   [ObjectBox - Data Model Updates](#objectbox-data-model-updates)\n-   [UIDs](#uids)\n-   [Renaming Entities and Properties](#renaming-entities-and-properties)\n-   [How-to and Example (Java/Kotlin and Dart)](#how-to-and-example-java-kotlin-and-dart)\n-   [How-to and Example (Python)](#how-to-and-example-python)\n-   [Changing Property Types](#changing-property-types)\n-   [How-to and Example](#how-to-and-example)\nWas this helpful?\nCopy\n```\n@Entity\n@Uid\npublic class MyName { ... }\n```\nCopy\n```\n@Entity(uid: 0)\nclass MyName { ... }\n```\nCopy\n```\nerror: [ObjectBox] UID operations for entity \"MyName\":\n  [Rename] apply the current UID using @Uid(6645479796472661392L) -\n  [Change/reset] apply a new UID using @Uid(4385203238808477712L)\n```\nCopy\n```\n@Entity(uid: 0) found on \"MyName\" - you can choose one of the following actions:\n    [Rename] apply the current UID using @Entity(uid: 6645479796472661392)\n    [Change/reset] apply a new UID using @Entity(uid: 4385203238808477712)\n```\nCopy\n```\n@Entity\n@Uid(6645479796472661392L)\npublic class MyName { ... }\n```\nCopy\n```\n@Entity(uid: 6645479796472661392)\nclass MyName { ... }\n```\nCopy\n```\n@Entity\n@Uid(6645479796472661392L)\npublic class MyNewName { ... }\n```\nCopy\n```\n@Entity(uid: 6645479796472661392)\nclass MyNewName { ... }\n```\nCopy\n```\n@Entity()\nclass MyName:\n    id = Id\n    some_property = Int\n```\nCopy\n```\nprint(MyName._uid)\n# 6645479796472661392\n```\nCopy\n```\n@Entity(uid=6645479796472661392)\nclass MyNewName:\n    id = Id\n    some_property = Int\n```\nCopy\n```\n// old:\nString year;\n// new:\nint yearInt;\n```\nCopy\n```\n@Uid\nString year;\n```\nCopy\n```\n@Property(uid: 0)\nString year;\n```\nCopy\n```\nerror: [ObjectBox] UID operations for property \"MyEntity.year\":\n  [Rename] apply the current UID using @Uid(6707341922395832766L) -\n  [Change/reset] apply a new UID using @Uid(9204131405652381067L)\n```\nCopy\n```\n@Property(uid: 0) found on \"year\" - you can choose one of the following actions:\n    [Rename] apply the current UID using @Property(uid: 6707341922395832766)\n    [Change/reset] apply a new UID using @Property(uid: 9204131405652381067)\n```\nCopy\n```\n@Uid(9204131405652381067L)\nint year;\n```\nCopy\n```\n@Property(uid: 9204131405652381067)\nString year;\n```",
  "timestamp": 1769974119957,
  "title": "Data Model Updates | ObjectBox Docs"
}