{
  "url": "https://pub.dev/packages/test",
  "markdown": "# test | Dart package\n[![](https://pub.dev/static/hash-jnfujih4/img/pub-dev-logo.svg)](https://pub.dev/)\nSign in\nHelp\n### pub.dev\n[Searching for packages](https://pub.dev/help/search)[Package scoring and pub points](https://pub.dev/help/scoring)\n### Flutter\n[Using packages](https://flutter.dev/using-packages/)[Developing packages and plugins](https://flutter.dev/developing-packages/)[Publishing a package](https://dart.dev/tools/pub/publishing)\n### Dart\n[Using packages](https://dart.dev/guides/packages)[Publishing a package](https://dart.dev/tools/pub/publishing)\n### pub.dev ![toggle folding of the section](https://pub.dev/static/hash-jnfujih4/img/nav-mobile-foldable-icon.svg)\n[Searching for packages](https://pub.dev/help/search)[Package scoring and pub points](https://pub.dev/help/scoring)\n### Flutter ![toggle folding of the section](https://pub.dev/static/hash-jnfujih4/img/nav-mobile-foldable-icon.svg)\n[Using packages](https://flutter.dev/using-packages/)[Developing packages and plugins](https://flutter.dev/developing-packages/)[Publishing a package](https://dart.dev/tools/pub/publishing)\n### Dart ![toggle folding of the section](https://pub.dev/static/hash-jnfujih4/img/nav-mobile-foldable-icon.svg)\n[Using packages](https://dart.dev/guides/packages)[Publishing a package](https://dart.dev/tools/pub/publishing)\n# test 1.29.0 ![copy \"test: ^1.29.0\" to clipboard](https://pub.dev/static/hash-jnfujih4/img/content-copy-icon.svg \"Copy \"test: ^1.29.0\" to clipboard\")\ntest: ^1.29.0 copied to clipboard\nPublished 25 days ago • [![verified publisher](https://pub.dev/static/hash-jnfujih4/img/material-icon-verified.svg \"Published by a pub.dev verified publisher\")dart.dev](https://pub.dev/publishers/dart.dev)\nSDK[Dart](https://pub.dev/packages?q=sdk%3Adart \"Packages compatible with Dart SDK\")[Flutter](https://pub.dev/packages?q=sdk%3Aflutter \"Packages compatible with Flutter SDK\")\nPlatform[Android](https://pub.dev/packages?q=platform%3Aandroid \"Packages compatible with Android platform\")[iOS](https://pub.dev/packages?q=platform%3Aios \"Packages compatible with iOS platform\")[Linux](https://pub.dev/packages?q=platform%3Alinux \"Packages compatible with Linux platform\")[macOS](https://pub.dev/packages?q=platform%3Amacos \"Packages compatible with macOS platform\")[web](https://pub.dev/packages?q=platform%3Aweb \"Packages compatible with Web platform\")[Windows](https://pub.dev/packages?q=platform%3Awindows \"Packages compatible with Windows platform\")\n![liked status: inactive](https://pub.dev/static/hash-jnfujih4/img/like-inactive.svg)![liked status: active](https://pub.dev/static/hash-jnfujih4/img/like-active.svg)618\n→\n### Metadata\nA full featured library for writing and running Dart tests across platforms.\nMore...\n-   Readme\n-   [Changelog](https://pub.dev/packages/test/changelog)\n-   [Installing](https://pub.dev/packages/test/install)\n-   [Versions](https://pub.dev/packages/test/versions)\n-   [Scores](https://pub.dev/packages/test/score)\n[![pub package](https://img.shields.io/pub/v/test.svg)](https://pub.dev/packages/test) [![package publisher](https://img.shields.io/pub/publisher/test.svg)](https://pub.dev/packages/test/publisher)\n`test` provides a standard way of writing and running tests in Dart.\n## Using package:test [#](#using-packagetest)\n-   [Writing Tests](#writing-tests)\n-   [Running Tests](#running-tests)\n    -   [Sharding Tests](#sharding-tests)\n    -   [Test Concurrency](#test-concurrency)\n    -   [Shuffling Tests](#shuffling-tests)\n    -   [Selecting a Test Reporter](#selecting-a-test-reporter)\n    -   [Collecting Code Coverage](#collecting-code-coverage)\n    -   [Restricting Tests to Certain Platforms](#restricting-tests-to-certain-platforms)\n    -   [Platform Selectors](#platform-selectors)\n    -   [Compiler Selectors](#compiler-selectors)\n    -   [Running Tests on Node.js](#running-tests-on-nodejs)\n-   [Asynchronous Tests](#asynchronous-tests)\n-   [Running Tests With Custom HTML](#running-tests-with-custom-html)\n    -   [Providing a custom HTML template](#providing-a-custom-html-template)\n-   [Configuring Tests](#configuring-tests)\n    -   [Skipping Tests](#skipping-tests)\n    -   [Timeouts](#timeouts)\n    -   [Platform-Specific Configuration](#platform-specific-configuration)\n    -   [Whole-Package Configuration](#whole-package-configuration)\n-   [Tagging Tests](#tagging-tests)\n-   [Debugging](#debugging)\n-   [Browser/VM Hybrid Tests](#browservm-hybrid-tests)\n-   [Support for Other Packages](#support-for-other-packages)\n    -   [`build_runner`](#build_runner)\n    -   [`term_glyph`](#term_glyph)\n-   [Further Reading](#further-reading)\n## Writing Tests [#](#writing-tests)\nTests are specified using the top-level [`test()`](https://pub.dev/documentation/test/latest/test/test.html) function. Test asserts can be made using [`expect` from `package:matcher`](https://pub.dev/documentation/matcher/latest/expect/expect.html)\n```dart\nimport 'package:test/test.dart';\nvoid main() {\n  test('String.split() splits the string on the delimiter', () {\n    var string = 'foo,bar,baz';\n    expect(string.split(','), equals(['foo', 'bar', 'baz']));\n  });\n  test('String.trim() removes surrounding whitespace', () {\n    var string = '  foo ';\n    expect(string.trim(), equals('foo'));\n  });\n}\n```\nTests can be grouped together using the [`group()`](https://pub.dev/documentation/test/latest/test/group.html) function. Each group's description is added to the beginning of its test's descriptions.\n```dart\nimport 'package:test/test.dart';\nvoid main() {\n  group('String', () {\n    test('.split() splits the string on the delimiter', () {\n      var string = 'foo,bar,baz';\n      expect(string.split(','), equals(['foo', 'bar', 'baz']));\n    });\n    test('.trim() removes surrounding whitespace', () {\n      var string = '  foo ';\n      expect(string.trim(), equals('foo'));\n    });\n  });\n  group('int', () {\n    test('.remainder() returns the remainder of division', () {\n      expect(11.remainder(3), equals(2));\n    });\n    test('.toRadixString() returns a hex string', () {\n      expect(11.toRadixString(16), equals('b'));\n    });\n  });\n}\n```\nYou can use the [`setUp()`](https://pub.dev/documentation/test/latest/test/setUp.html) and [`tearDown()`](https://pub.dev/documentation/test/latest/test/tearDown.html) functions to share code between tests. The `setUp()` callback will run before every test in a group or test suite, and `tearDown()` will run after. `tearDown()` will run even if a test fails, to ensure that it has a chance to clean up after itself.\n```dart\nimport 'package:test/test.dart';\nvoid main() {\n  late HttpServer server;\n  late Uri url;\n  setUp(() async {\n    server = await HttpServer.bind('localhost', 0);\n    url = Uri.parse('http://${server.address.host}:${server.port}');\n  });\n  tearDown(() async {\n    await server.close(force: true);\n    server = null;\n    url = null;\n  });\n  // ...\n}\n```\n## Running Tests [#](#running-tests)\nA single test file can be run just using `dart test path/to/test.dart` (as of Dart 2.10 - prior sdk versions must use `pub run test` instead of `dart test`).\n![Single file being run via \"dart test\"](https://raw.githubusercontent.com/dart-lang/test/master/pkgs/test/image/test1.gif)\nMany tests can be run at a time using `dart test path/to/dir`.\n![Directory being run via \"dart test\".](https://raw.githubusercontent.com/dart-lang/test/master/pkgs/test/image/test2.gif)\nIt's also possible to run a test on the Dart VM only by invoking it using `dart path/to/test.dart`, but this doesn't load the full test runner and will be missing some features.\nThe test runner accepts one or more path arguments. If there are no path arguments the runner defaults to running tests under the `test/` directory. When running for `test/` or any other directory, the runner will recursively search the directory for files that match the test name pattern `*_test.dart`. The pattern can be overridden in `dart_test.yaml`. When a path argument is a file instead of a directory it will be run as a test, regardless of the file name. Arguments which use shell globbing should avoid including non-test files in the path argument. Tests which are run by other test runners may use a different default path, such as `integration_test/`. Directories other than `test/` are ignored by `dart test` unless passed explicitly as a path to run.\nYou can select specific tests cases to run by name using `dart test -n \"test name\"`. The string is interpreted as a regular expression, and only tests whose description (including any group descriptions) match that regular expression will be run. You can also use the `-N` flag to run tests whose names contain a plain-text string.\nBy default, tests are run in the Dart VM, but you can run them in the browser as well by passing `dart test -p chrome path/to/test.dart`. `test` will take care of starting the browser and loading the tests, and all the results will be reported on the command line just like for VM tests. In fact, you can even run tests on both platforms with a single command: `dart test -p \"chrome,vm\" path/to/test.dart`.\nBy default each platform has a default compiler, but some of them support more than one compiler. You can choose which compiler to use by passing `dart test -c source`, which would run all VM tests from source instead of compiling them to kernel. This also supports targeting a specific platform using normal platform selectors, like this `dart test -c vm:source`.\n### Test Path Queries [#](#test-path-queries)\nSome query parameters are supported on test paths, which allow you to filter the tests that will run within just those paths. These filters are merged with any global options that are passed, and all filters must match for a test to be ran.\n-   **name**: Works the same as `--name` (simple contains check).\n    -   This is the only option that supports more than one entry.\n-   **full-name**: Requires an exact match for the name of the test.\n-   **line**: Matches any test that originates from this line in the test suite.\n-   **col**: Matches any test that originates from this column in the test suite.\n**Example Usage**: `dart test \"path/to/test.dart?line=10&col=2\"`\n#### Line/Col Matching Semantics\nThe `line` and `col` filters match against the current stack trace taken from the invocation to the `test` function, and are considered a match if **any frame** in the trace meets **all** of the following criteria:\n-   The URI of the frame matches the root test suite uri.\n    -   This means it will not match lines from imported libraries.\n-   If both `line` and `col` are passed, both must match **the same frame**.\n-   The specific `line` and `col` to be matched are defined by the tools creating the stack trace. This generally means they are 1 based and not 0 based, but this package is not in control of the exact semantics and they may vary based on platform implementations.\n### Sharding Tests [#](#sharding-tests)\nTests can also be sharded with the `--total-shards` and `--shard-index` arguments, allowing you to split up your test suites and run them separately. For example, if you wanted to run 3 shards of your test suite, you could run them as follows:\n```bash\ndart test --total-shards 3 --shard-index 0 path/to/test.dart\ndart test --total-shards 3 --shard-index 1 path/to/test.dart\ndart test --total-shards 3 --shard-index 2 path/to/test.dart\n```\nSharding: This refers to the process of splitting up a large test suite into smaller subsets (called shards) that can be run independently. Sharding is particularly useful for distributed testing, where multiple machines are used to run tests simultaneously. By dividing the test suite into smaller subsets, you can run tests in parallel across multiple machines, which can significantly reduce the overall testing time.\n### Test concurrency [#](#test-concurrency)\nTest suites run concurrently by default, using half of the host's CPU cores. Use `--concurrency` to control the number of test suites that runs concurrently, meaning that multiple tests in independent suites or platforms can run at the same time. For example, if you wanted to run the tests on 4 threads, you could run the tests as follows:\n```bash\ndart test --concurrency=4\n```\nThis can speed up the overall testing process, especially if you have a large number of test suites.\n### Shuffling Tests [#](#shuffling-tests)\nTest order can be shuffled with the `--test-randomize-ordering-seed` argument. This allows you to shuffle your tests with a specific seed (deterministic) or a random seed for each run. For example, consider the following test runs:\n```bash\ndart test --test-randomize-ordering-seed=12345\ndart test --test-randomize-ordering-seed=random\n```\nSetting `--test-randomize-ordering-seed=0` will have the same effect as not specifying it at all, meaning the test order will remain as-is.\n### Selecting a Test Reporter [#](#selecting-a-test-reporter)\nYou can adjust the output format of test results using the `--reporter=<option>` command line flag. The default format is the `compact` output format - a single line, continuously updated as tests are run. When running on the GitHub Actions CI however (detected via checking the `GITHUB_ACTIONS` environment variable for `true`), the default changes to the `github` output format - a reporter customized for that CI/CD system.\nThe available options for the `--reporter` flag are:\n-   `compact`: a single, continuously updated line\n-   `expanded`: a separate line for each update\n-   `github`: a custom reporter for GitHub Actions\n-   `json`: a machine-readable format; see [https://dart.dev/go/test-docs/json\\_reporter.md](https://dart.dev/go/test-docs/json_reporter.md)\n### Collecting Code Coverage [#](#collecting-code-coverage)\nTo collect code coverage, you can run tests with the `--coverage-path <file>` argument, which outputs a LCOV report to the given file path. The file specified can be an absolute or relative path. If a directory does not exist at the path specified, a directory will be created. If a directory does exist, files may be overwritten with the latest coverage data, if they conflict.\nCoverage gathering is currently only implemented for tests run on the Dart VM or Chrome.\nHere's an example of how to run tests and collect coverage:\n```shell\n## Run Dart tests and output coverage info to `./coverage/lcov.info`:\ndart run test --coverage-path=./coverage/lcov.info\n## Generate a human readable report:\ngenhtml -o ./coverage/report ./coverage/lcov.info\n## Open the coverage report:\nopen ./coverage/report/index.html\n```\n-   _LCOV is a GNU tool which provides information about what parts of a program are actually executed (i.e. \"covered\") while running a particular test case._\n-   The binary `genhtml` is one of the LCOV tools.\n-   See the LCOV project for more: [https://github.com/linux-test-project/lcov](https://github.com/linux-test-project/lcov)\n-   See the Homebrew LCOV formula: [https://formulae.brew.sh/formula/lcov](https://formulae.brew.sh/formula/lcov)\n### Restricting Tests to Certain Platforms [#](#restricting-tests-to-certain-platforms)\nSome test files only make sense to run on particular platforms. They may use `dart:html` or `dart:io`, they might test Windows' particular filesystem behavior, or they might use a feature that's only available in Chrome. The [`@TestOn`](https://pub.dev/documentation/test/latest/test/TestOn-class.html) annotation makes it easy to declare exactly which platforms a test file should run on. Just put it at the top of your file, before any `library` or `import` declarations:\n```dart\n@TestOn('vm')\nimport 'dart:io';\nimport 'package:test/test.dart';\nvoid main() {\n  // ...\n}\n```\nThe string you pass to `@TestOn` is what's called a \"platform selector\", and it specifies exactly which platforms a test can run on. It can be as simple as the name of a platform, or a more complex Dart-like boolean expression involving these platform names.\nYou can also declare that your entire package only works on certain platforms by adding a [`test_on` field](https://github.com/dart-lang/test/blob/master/pkgs/test/doc/configuration.md#test_on) to your package config file.\n### Platform Selectors [#](#platform-selectors)\nPlatform selectors use the [boolean selector syntax](https://github.com/dart-lang/boolean_selector/blob/master/README.md) defined in the [`boolean_selector`](https://pub.dev/packages/boolean_selector) package, which is a subset of Dart's expression syntax that only supports boolean operations. The platform selectors identify overlapping subsets of the ways that Dart code can be compiled and run.\nThe following identifiers are defined:\n-   `vm`: Whether the test is running on the command-line Dart VM.\n-   `chrome`: Whether the test is running on Google Chrome.\n-   `firefox`: Whether the test is running on Mozilla Firefox.\n-   `safari`: Whether the test is running on Apple Safari.\n-   `edge`: Whether the test is running on Microsoft Edge browser.\n-   `node`: Whether the test is running on Node.js.\n-   `dart-vm`: Whether the test is running on the Dart VM in any context. It's identical to `!js`.\n-   `browser`: Whether the test is running in any browser.\n-   `js`: Whether the test has been compiled to JS. This is identical to `!dart-vm`.\n-   `blink`: Whether the test is running in a browser that uses the Blink rendering engine.\n-   `windows`: Whether the test is running on Windows. This can only be `true` if either `vm` or `node` is true.\n-   `mac-os`: Whether the test is running on MacOS. This can only be `true` if either `vm` or `node` is true.\n-   `linux`: Whether the test is running on Linux. This can only be `true` if either `vm` or `node` is true.\n-   `android`: Whether the test is running on Android. If `vm` is false, this will be `false` as well, which means that this _won't_ be true if the test is running on an Android browser.\n-   `ios`: Whether the test is running on iOS. If `vm` is false, this will be `false` as well, which means that this _won't_ be true if the test is running on an iOS browser.\n-   `posix`: Whether the test is running on a POSIX operating system. This is equivalent to `!windows`.\n-   `dart2js`: Whether the test has been compiled with Dart2Js.\n-   `dart2wasm`: Whether the test has been compiled with Dart2Wasm.\n-   `kernel`: Whether the test has been compiled to kernel.\n-   `source`: Whether the test has been run with no compiler (from source).\nFor example, if you wanted to run a test on every browser but Chrome compiled with dart2js (in opposition to dart2wasm), you would write `@TestOn('browser && !chrome && dart2js')`.\n### Running Tests on Node.js [#](#running-tests-on-nodejs)\nThe test runner also supports compiling tests to JavaScript and running them on [Node.js](https://nodejs.org/en/) by passing `--platform node`. Note that Node has access to _neither_ `dart:html` nor `dart:io`, so any platform-specific APIs will have to be invoked using the [`js`](https://pub.dev/packages/js) package. However, it may be useful when testing APIs that are meant to be used by JavaScript code.\nThe test runner looks for an executable named `node` (on Mac OS or Linux) or `node.exe` (on Windows) on your system path. When compiling Node.js tests, it passes `-Dnode=true`, so tests can determine whether they're running on Node using [`const bool.fromEnvironment('node')`](https://api.dart.dev/stable/dart-core/bool/bool.fromEnvironment.html). It also sets `--server-mode`, which will tell the compiler that `dart:html` is not available.\nIf a top-level `node_modules` directory exists, tests running on Node.js can import modules from it.\n## Asynchronous Tests [#](#asynchronous-tests)\nTests written with `async`/`await` will work automatically. The test runner won't consider the test finished until the returned `Future` completes.\n```dart\nimport 'dart:async';\nimport 'package:test/test.dart';\nvoid main() {\n  test('Future.value() returns the value', () async {\n    var value = await Future.value(10);\n    expect(value, equals(10));\n  });\n}\n```\n### Uncaught Async Errors [#](#uncaught-async-errors)\nAny uncaught asynchronous error throws within the zone that a test is running in will cause the test to be considered a failure. This can cause a test which was previously considered complete and passing to change into a failure if the uncaught async error is raised late. If all test cases within the suite have completed this may cause some errors to be missed, or to surface in only some runs.\nAvoid uncaught async errors by ensuring that all futures have an error handler [before they complete as an error](https://dart.dev/guides/libraries/futures-error-handling#potential-problem-failing-to-register-error-handlers-early).\n## Running Tests With Custom HTML [#](#running-tests-with-custom-html)\nBy default, the test runner will generate its own empty HTML file for browser tests. However, tests that need custom HTML can create their own files. These files have three requirements:\n-   They must have the same name as the test, with `.dart` replaced by `.html`. You can also provide a configuration path to an HTML file if you want it to be reused across all tests. See [Providing a custom HTML template](#providing-a-custom-html-template) below.\n-   They must contain a `link` tag with `rel=\"x-dart-test\"` and an `href` attribute pointing to the test script.\n-   They must contain `<script src=\"packages/test/dart.js\"></script>`.\nFor example, if you had a test called `custom_html_test.dart`, you might write the following HTML file:\n```html\n<!doctype html>\n<!-- custom_html_test.html -->\n<html>\n  <head>\n    <title>Custom HTML Test</title>\n    <link rel=\"x-dart-test\" href=\"custom_html_test.dart\">\n    <script src=\"packages/test/dart.js\"></script>\n  </head>\n  <body>\n    // ...\n  </body>\n</html>\n```\n### Providing a custom HTML template [#](#providing-a-custom-html-template)\nIf you want to share the same HTML file across all tests, you can provide a `custom_html_template_path` configuration option to your configuration file. This file should follow the rules above, except that instead of the link tag add exactly one `{{testScript}}` in the place where you want the template processor to insert it.\nYou can also optionally use any number of `{{testName}}` placeholders which will be replaced by the test filename.\nThe template can't be named like any test file, as that would clash with using the custom HTML mechanics. In such a case, an error will be thrown.\nFor example:\n```yaml\ncustom_html_template_path: html_template.html.tpl\n```\n```html\n<!doctype html>\n<!-- html_template.html.tpl -->\n<html>\n  <head>\n    <title>{{testName}} Test</title>\n    {{testScript}}\n    <script src=\"packages/test/dart.js\"></script>\n  </head>\n  <body>\n    // ...\n  </body>\n</html>\n```\n## Configuring Tests [#](#configuring-tests)\n### Skipping Tests [#](#skipping-tests)\nIf a test, group, or entire suite isn't working yet, and you just want it to stop complaining, you can mark it as \"skipped\". The test or tests won't be run, and, if you supply a reason why, that reason will be printed. In general, skipping tests indicates that they should run but is temporarily not working. If they're fundamentally incompatible with a platform, [`@TestOn`/`testOn`](#restricting-tests-to-certain-platforms) should be used instead.\nTo skip a test suite, put a `@Skip` annotation at the top of the file:\n```dart\n@Skip('currently failing (see issue 1234)')\nimport 'package:test/test.dart';\nvoid main() {\n  // ...\n}\n```\nThe string you pass should describe why the test is skipped. You don't have to include it, but it's a good idea to document why the test isn't running.\nGroups and individual tests can be skipped by passing the `skip` parameter. This can be either `true` or a String describing why the test is skipped. For example:\n```dart\nimport 'package:test/test.dart';\nvoid main() {\n  group('complicated algorithm tests', () {\n    // ...\n  }, skip: \"the algorithm isn't quite right\");\n  test('error-checking test', () {\n    // ...\n  }, skip: 'TODO: add error-checking.');\n}\n```\n### Timeouts [#](#timeouts)\nBy default, tests will time out after 30 seconds of inactivity. The timeout applies to deadlocks or cases where the test stops making progress, it does not ensure that an overall test case or test suite completes within any set time.\nTimeouts can be configured on a per-test, -group, or -suite basis. To change the timeout for a test suite, put a `@Timeout` annotation at the top of the file:\n```dart\n@Timeout(Duration(seconds: 45))\nimport 'package:test/test.dart';\nvoid main() {\n  // ...\n}\n```\nIn addition to setting an absolute timeout, you can set the timeout relative to the default using `@Timeout.factor`. For example, `@Timeout.factor(1.5)` will set the timeout to one and a half times as long as the default—45 seconds.\nTimeouts can be set for tests and groups using the `timeout` parameter. This parameter takes a `Timeout` object just like the annotation. For example:\n```dart\nimport 'package:test/test.dart';\nvoid main() {\n  group('slow tests', () {\n    // ...\n    test('even slower test', () {\n      // ...\n    }, timeout: Timeout.factor(2));\n  }, timeout: Timeout(Duration(minutes: 1)));\n}\n```\nNested timeouts apply in order from outermost to innermost. That means that \"even slower test\" will take two minutes to time out, since it multiplies the group's timeout by 2.\n### Platform-Specific Configuration [#](#platform-specific-configuration)\nSometimes a test may need to be configured differently for different platforms. Windows might run your code slower than other platforms, or your DOM manipulation might not work right on Safari yet. For these cases, you can use the `@OnPlatform` annotation and the `onPlatform` named parameter to `test()` and `group()`. For example:\n```dart\n@OnPlatform({\n  // Give Windows some extra wiggle-room before timing out.\n  'windows': Timeout.factor(2)\n})\nimport 'package:test/test.dart';\nvoid main() {\n  test('do a thing', () {\n    // ...\n  }, onPlatform: {\n    'safari': Skip('Safari is currently broken (see #1234)')\n  });\n}\n```\nBoth the annotation and the parameter take a map. The map's keys are [platform selectors](#platform-selectors) which describe the platforms for which the specialized configuration applies. Its values are instances of some of the same annotation classes that can be used for a suite: `Skip` and `Timeout`. A value can also be a list of these values.\nIf multiple platforms match, the configuration is applied in order from first to last, just as they would in nested groups. This means that for configuration like duration-based timeouts, the last matching value wins.\nYou can also set up global platform-specific configuration using the [package configuration file](https://github.com/dart-lang/test/blob/master/pkgs/test/doc/configuration.md#configuring-platforms).\n### Tagging Tests [#](#tagging-tests)\nTags are short strings that you can associate with tests, groups, and suites. They don't have any built-in meaning, but they're very useful nonetheless: you can associate your own custom configuration with them, or you can use them to easily filter tests so you only run the ones you need to.\nTags are defined using the `@Tags` annotation for suites and the `tags` named parameter to `test()` and `group()`. For example:\n```dart\n@Tags(['browser'])\nimport 'package:test/test.dart';\nvoid main() {\n  test('successfully launches Chrome', () {\n    // ...\n  }, tags: 'chrome');\n  test('launches two browsers at once', () {\n    // ...\n  }, tags: ['chrome', 'firefox']);\n}\n```\nIf the test runner encounters a tag that wasn't declared in the [package configuration file](https://github.com/dart-lang/test/blob/master/pkgs/test/doc/configuration.md#configuring-tags), it'll print a warning, so be sure to include all your tags there. You can also use the file to provide default configuration for tags, like giving all `browser` tests twice as much time before they time out.\nTests can be filtered based on their tags by passing command line flags. The `--tags` or `-t` flag will cause the test runner to only run tests with the given tags, and the `--exclude-tags` or `-x` flag will cause it to only run tests _without_ the given tags. These flags also support [boolean selector syntax](https://github.com/dart-lang/boolean_selector/blob/master/README.md). For example, you can pass `--tags \"(chrome || firefox) && !slow\"` to select quick Chrome or Firefox tests.\nNote that tags must be valid Dart identifiers, although they may also contain hyphens.\n### Whole-Package Configuration [#](#whole-package-configuration)\nFor configuration that applies across multiple files, or even the entire package, `test` supports a configuration file called `dart_test.yaml`. At its simplest, this file can contain the same sort of configuration that can be passed as command-line arguments:\n```yaml\n# This package's tests are very slow. Double the default timeout.\ntimeout: 2x\n# This is a browser-only package, so test on chrome by default.\nplatforms: [chrome]\n```\nThe configuration file sets new defaults. These defaults can still be overridden by command-line arguments, just like the built-in defaults. In the example above, you could pass `--platform firefox` to run on Firefox.\nA configuration file can do much more than just set global defaults. See [the full documentation](https://github.com/dart-lang/test/blob/master/pkgs/test/doc/configuration.md) for more details.\n### Compiler flags [#](#compiler-flags)\nThe test runner does not support general purpose flags to control compilation such as `-D` defines or flags like `--no-sound-null-safety`. In most cases it is preferable to avoid writing tests that depend on the fine-grained compiler configuration. For instance to choose between sound and unsound null safety, prefer to choose a language version for each test which has the desired behavior by default - choose a language version below `2.12` to disable sound null safety, and a language version above `2.12` to enable sound null safety. When fine-grained configuration is unavoidable, the approach varies by platform.\nCompilation for browser and node tests can be configured by passing arguments to `dart compile js` with `--dart2js-args` options.\nFine-grained compilation configuration is not supported for the VM. Any configuration which impacts runtime behavior for the entire VM, such as `-D` defines (when used for non-const values) and runtime behavior experiments, will influence both the test runner and the isolates spawned to run test suites. Experiments which are breaking may cause incompatibilities with the test runner. These may be specified with a `DART_VM_OPTIONS` environment variable when running with `pub run test`, or by passing them to the `dart` command before the `test` subcommand when using `dart test`.\n## Debugging [#](#debugging)\nTests can be debugged interactively using platforms' built-in development tools. Tests running on browsers can use those browsers' development consoles to inspect the document, set breakpoints, and step through code. Those running on the Dart VM use [Dart DevTools](https://dart.dev/tools/dart-devtools).\nThe first step when debugging is to pass the `--pause-after-load` flag to the test runner. This pauses the browser after each test suite has loaded, so that you have time to open the development tools and set breakpoints. For the Dart VM it will print the remote debugger URL.\nOnce you've set breakpoints, either click the big arrow in the middle of the web page or press Enter in your terminal to start the tests running. When you hit a breakpoint, the runner will open its own debugging console in the terminal that controls how tests are run. You can type \"restart\" there to re-run your test as many times as you need to figure out what's going on.\nNormally, browser tests are run in hidden iframes. However, when debugging, the iframe for the current test suite is expanded to fill the browser window so you can see and interact with any HTML it renders. Note that the Dart animation may still be visible behind the iframe; to hide it, just add a `background-color` to the page's HTML.\n## Browser/VM Hybrid Tests [#](#browservm-hybrid-tests)\nCode that's written for the browser often needs to talk to some kind of server. Maybe you're testing the HTML served by your app, or maybe you're writing a library that communicates over WebSockets. We call tests that run code on both the browser and the VM **hybrid tests**.\nHybrid tests use one of two functions: [`spawnHybridCode()`](https://pub.dev/documentation/test/latest/test/spawnHybridCode.html) and [`spawnHybridUri()`](https://pub.dev/documentation/test/latest/test/spawnHybridUri.html). Both of these spawn Dart VM [isolates](https://api.dart.dev/stable/dart-isolate/dart-isolate-library.html) that can import `dart:io` and other VM-only libraries. The only difference is where the code from the isolate comes from: `spawnHybridCode()` takes a chunk of actual Dart code, whereas `spawnHybridUri()` takes a URL. They both return a [`StreamChannel`](https://pub.dev/documentation/stream_channel/latest/stream_channel/StreamChannel-class.html) that communicates with the hybrid isolate. For example:\n```dart\n// ## test/web_socket_server.dart\n// The library loaded by spawnHybridUri() can import any packages that your\n// package depends on, including those that only work on the VM.\nimport 'package:shelf/shelf_io.dart' as io;\nimport 'package:shelf_web_socket/shelf_web_socket.dart';\nimport 'package:stream_channel/stream_channel.dart';\n// Once the hybrid isolate starts, it will call the special function\n// hybridMain() with a StreamChannel that's connected to the channel\n// returned spawnHybridCode().\nhybridMain(StreamChannel channel) async {\n  // Start a WebSocket server that just sends \"hello!\" to its clients.\n  var server = await io.serve(webSocketHandler((webSocket, _) {\n    webSocket.sink.add('hello!');\n  }), 'localhost', 0);\n  // Send the port number of the WebSocket server to the browser test, so\n  // it knows what to connect to.\n  channel.sink.add(server.port);\n}\n// ## test/web_socket_test.dart\n@TestOn('browser')\nimport 'dart:html';\nimport 'package:test/test.dart';\nvoid main() {\n  test('connects to a server-side WebSocket', () async {\n    // Each spawnHybrid function returns a StreamChannel that communicates with\n    // the hybrid isolate. You can close this channel to kill the isolate.\n    var channel = spawnHybridUri('web_socket_server.dart');\n    // Get the port for the WebSocket server from the hybrid isolate.\n    var port = await channel.stream.first;\n    var socket = WebSocket('ws://localhost:$port');\n    var message = await socket.onMessage.first;\n    expect(message.data, equals('hello!'));\n  });\n}\n```\n![A diagram showing a test in a browser communicating with a Dart VM isolate outside the browser.](https://raw.githubusercontent.com/dart-lang/test/master/pkgs/test/image/hybrid.png)\n**Note**: If you write hybrid tests, be sure to add a dependency on the `stream_channel` package, since you're using its API!\n## Support for Other Packages [#](#support-for-other-packages)\n### `build_runner` [#](#build_runner)\nIf you are using `package:build_runner` to build your package, then you will need a dependency on `build_test` in your `dev_dependencies`, and then you can use the `pub run build_runner test` command to run tests.\nTo supply arguments to `package:test`, you need to separate them from your build args with a `--` argument. For example, running all web tests in release mode would look like this `pub run build_runner test --release -- -p vm`.\n### `term_glyph` [#](#term_glyph)\nThe [`term_glyph`](https://pub.dev/packages/term_glyph) package provides getters for Unicode glyphs with ASCII alternatives. `test` ensures that it's configured to produce ASCII when the user is running on Windows, where Unicode isn't supported. This ensures that testing libraries can use Unicode on POSIX operating systems without breaking Windows users.\n## Further Reading [#](#further-reading)\nCheck out the [API docs](https://pub.dev/documentation/test/latest/) for detailed information about all the functions available to tests.\nThe test runner also supports a machine-readable JSON-based reporter. This reporter allows the test runner to be wrapped and its progress presented in custom ways (for example, in an IDE). See [the protocol documentation](https://github.com/dart-lang/test/blob/master/pkgs/test/doc/json_reporter.md) for more details.\n[\n618\nlikes\n150\npoints\n4.75M\ndownloads\n](https://pub.dev/packages/test/score)\n### Publisher\n[![verified publisher](https://pub.dev/static/hash-jnfujih4/img/material-icon-verified.svg \"Published by a pub.dev verified publisher\")dart.dev](https://pub.dev/publishers/dart.dev)\n### Weekly Downloads\n### Metadata\nA full featured library for writing and running Dart tests across platforms.\n[Repository (GitHub)](https://github.com/dart-lang/test/tree/master/pkgs/test)\n[View/report issues](https://github.com/dart-lang/test/issues?q=is%3Aissue+is%3Aopen+label%3Apackage%3Atest)\n[Contributing](https://github.com/dart-lang/test/blob/master/CONTRIBUTING.md)\n### Topics\n[#testing](https://pub.dev/packages?q=topic%3Atesting \"Packages that facilitate testing.\")\n### Documentation\n[API reference](https://pub.dev/documentation/test/latest/)\n### License\n![](https://pub.dev/static/hash-jnfujih4/img/material-icon-balance.svg)BSD-3-Clause ([license](https://pub.dev/packages/test/license))\n### Dependencies\n[analyzer](https://pub.dev/packages/analyzer \">=8.0.0 <11.0.0\"), [async](https://pub.dev/packages/async \"^2.5.0\"), [boolean\\_selector](https://pub.dev/packages/boolean_selector \"^2.1.0\"), [collection](https://pub.dev/packages/collection \"^1.15.0\"), [coverage](https://pub.dev/packages/coverage \"^1.15.0\"), [http\\_multi\\_server](https://pub.dev/packages/http_multi_server \"^3.0.0\"), [io](https://pub.dev/packages/io \"^1.0.0\"), [matcher](https://pub.dev/packages/matcher \">=0.12.16 <0.12.19\"), [node\\_preamble](https://pub.dev/packages/node_preamble \"^2.0.0\"), [package\\_config](https://pub.dev/packages/package_config \"^2.0.0\"), [path](https://pub.dev/packages/path \"^1.8.0\"), [pool](https://pub.dev/packages/pool \"^1.5.0\"), [shelf](https://pub.dev/packages/shelf \"^1.0.0\"), [shelf\\_packages\\_handler](https://pub.dev/packages/shelf_packages_handler \"^3.0.0\"), [shelf\\_static](https://pub.dev/packages/shelf_static \"^1.0.0\"), [shelf\\_web\\_socket](https://pub.dev/packages/shelf_web_socket \">=1.0.0 <4.0.0\"), [source\\_span](https://pub.dev/packages/source_span \"^1.8.0\"), [stack\\_trace](https://pub.dev/packages/stack_trace \"^1.10.0\"), [stream\\_channel](https://pub.dev/packages/stream_channel \"^2.1.0\"), [test\\_api](https://pub.dev/packages/test_api \"0.7.9\"), [test\\_core](https://pub.dev/packages/test_core \"0.6.15\"), [typed\\_data](https://pub.dev/packages/typed_data \"^1.3.0\"), [web\\_socket\\_channel](https://pub.dev/packages/web_socket_channel \">=2.0.0 <4.0.0\"), [webkit\\_inspection\\_protocol](https://pub.dev/packages/webkit_inspection_protocol \"^1.0.0\"), [yaml](https://pub.dev/packages/yaml \"^3.0.0\")\n### More\n[Packages that depend on test](https://pub.dev/packages?q=dependency%3Atest)\n### ← Metadata\n[\n618\nlikes\n150\npoints\n4.75M\ndownloads\n](https://pub.dev/packages/test/score)\n### Publisher\n[![verified publisher](https://pub.dev/static/hash-jnfujih4/img/material-icon-verified.svg \"Published by a pub.dev verified publisher\")dart.dev](https://pub.dev/publishers/dart.dev)\n### Weekly Downloads\n### Metadata\nA full featured library for writing and running Dart tests across platforms.\n[Repository (GitHub)](https://github.com/dart-lang/test/tree/master/pkgs/test)\n[View/report issues](https://github.com/dart-lang/test/issues?q=is%3Aissue+is%3Aopen+label%3Apackage%3Atest)\n[Contributing](https://github.com/dart-lang/test/blob/master/CONTRIBUTING.md)\n### Topics\n[#testing](https://pub.dev/packages?q=topic%3Atesting \"Packages that facilitate testing.\")\n### Documentation\n[API reference](https://pub.dev/documentation/test/latest/)\n### License\n![](https://pub.dev/static/hash-jnfujih4/img/material-icon-balance.svg)BSD-3-Clause ([license](https://pub.dev/packages/test/license))\n### Dependencies\n[analyzer](https://pub.dev/packages/analyzer \">=8.0.0 <11.0.0\"), [async](https://pub.dev/packages/async \"^2.5.0\"), [boolean\\_selector](https://pub.dev/packages/boolean_selector \"^2.1.0\"), [collection](https://pub.dev/packages/collection \"^1.15.0\"), [coverage](https://pub.dev/packages/coverage \"^1.15.0\"), [http\\_multi\\_server](https://pub.dev/packages/http_multi_server \"^3.0.0\"), [io](https://pub.dev/packages/io \"^1.0.0\"), [matcher](https://pub.dev/packages/matcher \">=0.12.16 <0.12.19\"), [node\\_preamble](https://pub.dev/packages/node_preamble \"^2.0.0\"), [package\\_config](https://pub.dev/packages/package_config \"^2.0.0\"), [path](https://pub.dev/packages/path \"^1.8.0\"), [pool](https://pub.dev/packages/pool \"^1.5.0\"), [shelf](https://pub.dev/packages/shelf \"^1.0.0\"), [shelf\\_packages\\_handler](https://pub.dev/packages/shelf_packages_handler \"^3.0.0\"), [shelf\\_static](https://pub.dev/packages/shelf_static \"^1.0.0\"), [shelf\\_web\\_socket](https://pub.dev/packages/shelf_web_socket \">=1.0.0 <4.0.0\"), [source\\_span](https://pub.dev/packages/source_span \"^1.8.0\"), [stack\\_trace](https://pub.dev/packages/stack_trace \"^1.10.0\"), [stream\\_channel](https://pub.dev/packages/stream_channel \"^2.1.0\"), [test\\_api](https://pub.dev/packages/test_api \"0.7.9\"), [test\\_core](https://pub.dev/packages/test_core \"0.6.15\"), [typed\\_data](https://pub.dev/packages/typed_data \"^1.3.0\"), [web\\_socket\\_channel](https://pub.dev/packages/web_socket_channel \">=2.0.0 <4.0.0\"), [webkit\\_inspection\\_protocol](https://pub.dev/packages/webkit_inspection_protocol \"^1.0.0\"), [yaml](https://pub.dev/packages/yaml \"^3.0.0\")\n### More\n[Packages that depend on test](https://pub.dev/packages?q=dependency%3Atest)\nBack\n![previous](https://pub.dev/static/hash-jnfujih4/img/keyboard_arrow_left.svg)\n![next](https://pub.dev/static/hash-jnfujih4/img/keyboard_arrow_right.svg)\n[Dart language](https://dart.dev/)[Report package](https://pub.dev/report?subject=package%3Atest&url=https%3A%2F%2Fpub.dev%2Fpackages%2Ftest)[Policy](https://pub.dev/policy)[Terms](https://www.google.com/intl/en/policies/terms/)[API Terms](https://developers.google.com/terms/)[Security](https://pub.dev/security)[Privacy](https://www.google.com/intl/en/policies/privacy/)[Help](https://pub.dev/help)[![RSS](https://pub.dev/static/hash-jnfujih4/img/rss-feed-icon.svg \"RSS/atom feed\")](https://pub.dev/feed.atom)[![bug report](https://pub.dev/static/hash-jnfujih4/img/bug-report-white-96px.png \"Report an issue with this site\")](https://github.com/dart-lang/pub-dev/issues/new)",
  "timestamp": 1769987715142,
  "title": "test | Dart package"
}