{
  "url": "https://drift.simonbinder.eu/docs/getting-started",
  "markdown": "# Setup\n[Drift](https://drift.simonbinder.eu/)\n-   [Docs](https://drift.simonbinder.eu/)\n-   [Guides](https://drift.simonbinder.eu/guides/datetime-migrations)\n-   [Examples](https://drift.simonbinder.eu/examples/)\n-   [pub.dev](https://pub.dev/packages/drift)\n-   [Docs](https://drift.simonbinder.eu/)\n    -   -   [Home](https://drift.simonbinder.eu/)\n        -   [Setup guide](https://drift.simonbinder.eu/setup)\n        -   [FAQ](https://drift.simonbinder.eu/faq)\n    -   Dart reference\n        -   [Defining tables](https://drift.simonbinder.eu/dart_api/tables)\n        -   [Selects](https://drift.simonbinder.eu/dart_api/select)\n        -   [Writes (update, insert, delete)](https://drift.simonbinder.eu/dart_api/writes)\n        -   [Expressions](https://drift.simonbinder.eu/dart_api/expressions)\n        -   [Stream queries](https://drift.simonbinder.eu/dart_api/streams)\n        -   [Schema introspection](https://drift.simonbinder.eu/dart_api/schema_inspection)\n        -   [Views](https://drift.simonbinder.eu/dart_api/views)\n        -   [DAOs](https://drift.simonbinder.eu/dart_api/daos)\n        -   [Manager API](https://drift.simonbinder.eu/dart_api/manager)\n        -   [Transactions](https://drift.simonbinder.eu/dart_api/transactions)\n    -   SQL API reference\n        -   [Overview](https://drift.simonbinder.eu/sql_api)\n        -   [Drift files](https://drift.simonbinder.eu/sql_api/drift_files)\n        -   [SQLite extensions](https://drift.simonbinder.eu/sql_api/extensions)\n        -   [Custom queries](https://drift.simonbinder.eu/sql_api/custom_queries)\n    -   Migrations\n        -   [Overview](https://drift.simonbinder.eu/migrations)\n        -   [Migrator APIs](https://drift.simonbinder.eu/migrations/api)\n        -   [Testing](https://drift.simonbinder.eu/migrations/tests)\n        -   [Helpers](https://drift.simonbinder.eu/migrations/step_by_step)\n        -   [Schema exports](https://drift.simonbinder.eu/migrations/exports)\n    -   Platforms\n        -   [Overview](https://drift.simonbinder.eu/platforms)\n        -   [Native](https://drift.simonbinder.eu/platforms/vm)\n        -   [Web](https://drift.simonbinder.eu/platforms/web)\n        -   [Encryption](https://drift.simonbinder.eu/platforms/encryption)\n        -   [libsql](https://drift.simonbinder.eu/platforms/libsql)\n        -   [PostgreSQL](https://drift.simonbinder.eu/platforms/postgres)\n    -   Generation options\n        -   [Overview](https://drift.simonbinder.eu/generation_options)\n        -   [Modular code generation](https://drift.simonbinder.eu/generation_options/modular)\n        -   [Drift and other builders](https://drift.simonbinder.eu/generation_options/in_other_builders)\n    -   Tools\n        -   [Overview](https://drift.simonbinder.eu/tools)\n        -   [Devtools extension](https://drift.simonbinder.eu/tools/devtools)\n        -   [Community tools](https://drift.simonbinder.eu/community_tools)\n    -   Advanced topics\n        -   [Isolates](https://drift.simonbinder.eu/isolates)\n        -   [Testing](https://drift.simonbinder.eu/testing)\n        -   [Generated table rows](https://drift.simonbinder.eu/dart_api/rows)\n        -   [Type converters](https://drift.simonbinder.eu/type_converters)\n        -   [Custom SQL types](https://drift.simonbinder.eu/sql_api/types)\n[Edit this page](https://github.com/simolus3/drift/edit/develop/docs/content/setup.md) [Create documentation issue](https://github.com/simolus3/drift/issues/new?template=docs.md&title=Documentation+issue%3A+Setup)\nOn this page[](# \"Top of the page\")\n-   [The dependencies](#the-dependencies)\n-   [Database class](#database-class)\n-   [Next steps](#next-steps)\n# Setup\nAll you need to know about adding drift to your project.\nDrift is a powerful database library for Dart and Flutter applications. To support its advanced capabilities like type-safe SQL queries, verification of your database and migrations, it uses a builder and command-line tooling that runs at compile-time.\nThis means that the setup involves a little more than just adding a single dependency to your pubspec. This page explains how to add drift to your project and gives pointers to the next steps. If you're stuck adding drift, or have questions or feedback about the project, please share that with the community by [starting a discussion on GitHub](https://github.com/simolus3/drift/discussions). If you want to look at an example app for inspiration, a cross-platform Flutter app using drift is available [as part of the drift repository](https://github.com/simolus3/drift/tree/develop/examples/app).\n## The dependencies[#](https://drift.simonbinder.eu/setup#the-dependencies)\nFirst, let's add drift to your project's `pubspec.yaml`. In addition to the core drift dependencies (`drift` and `drift_dev` to generate code), we're also adding a package to open databases on the respective platform.\n-   Flutter (sqlite3)\n-   Dart (sqlite3)\n-   Dart (postgres)\n```\ndependencies:\n  drift: ^2.30.1\n  drift_flutter: ^0.2.8\n  path_provider: ^2.1.5\ndev_dependencies:\n  drift_dev: ^2.30.1\n  build_runner: ^2.10.5\n```\nAlternatively, you can achieve the same result using the following command:\n```\ndart pub add drift drift_flutter path_provider dev:drift_dev dev:build_runner\n```\n```\ndependencies:\n  drift: ^2.30.1\n  sqlite3: ^2.9.4\ndev_dependencies:\n  drift_dev: ^2.30.1\n  build_runner: ^2.10.5\n```\nAlternatively, you can achieve the same result using the following command:\n```\ndart pub add drift sqlite3 dev:drift_dev dev:build_runner\n```\n```\ndependencies:\n  drift: ^2.30.1\n  postgres: ^3.5.9\n  drift_postgres: ^1.3.1\ndev_dependencies:\n  drift_dev: ^2.30.1\n  build_runner: ^2.10.5\n```\nAlternatively, you can achieve the same result using the following command:\n```\ndart pub add drift postgres drift_postgres dev:drift_dev dev:build_runner\n```\nDrift only generates code for sqlite3 by default. So, also create a `build.yaml` to [configure](https://drift.simonbinder.eu/generation_options) `drift_dev`:\n```\ntargets:\n  $default:\n    builders:\n      drift_dev:\n        options:\n          sql:\n            dialects:\n              - postgres\n              # Uncomment if you need to support both\n    #         - sqlite\n```\n## Database class[#](https://drift.simonbinder.eu/setup#database-class)\nEvery project using drift needs at least one class to access a database. This class references all the tables you want to use and is the central entry point for drift's code generator. In this example, we'll assume that this database class is defined in a file called `database.dart` and somewhere under `lib/`. Of course, you can put this class in any Dart file you like.\nTo make the database useful, we'll also add a simple table to it. This table, `TodoItems`, can be used to store todo items for a todo list app. Everything there is to know about defining tables in Dart is described on the [Dart tables](https://drift.simonbinder.eu/dart_api/tables) page. If you prefer using SQL to define your tables, drift supports that too! You can read all about that [here](https://drift.simonbinder.eu/sql_api).\nFor now, populate the contents of `database.dart` with these tables which could form the persistence layer of a simple todolist application:\n```\nimport 'package:drift/drift.dart';\npart 'database.g.dart';\nclass TodoItems extends Table {\n  IntColumn get id => integer().autoIncrement()();\n  TextColumn get title => text().withLength(min: 6, max: 32)();\n  TextColumn get content => text().named('body')();\n  DateTimeColumn get createdAt => dateTime().nullable()();\n}\n@DriftDatabase(tables: [TodoItems])\nclass AppDatabase extends _$AppDatabase {\n}\n```\nYou will get an analyzer warning on the `part` statement and on `extends _$AppDatabase`. This is expected because drift's generator did not run yet. You can do that by invoking [build\\_runner](https://pub.dev/packages/build_runner):\n-   `dart run build_runner build` generates all the required code once.\n-   `dart run build_runner watch` watches for changes in your sources and generates code with incremental rebuilds. This is suitable for development sessions.\nAfter running either command, the `database.g.dart` file containing the generated `_$AppDatabase` class will have been generated. You will now see errors related to missing overrides and a missing constructor. The constructor is responsible for telling drift how to open the database. The `schemaVersion` getter is relevant for migrations after changing the database, we can leave it at `1` for now. Update `database.dart` so it now looks like this:\n-   Flutter (sqlite3)\n-   Dart (sqlite3)\n-   Dart (postgres)\n```\nimport 'package:drift/drift.dart';\nimport 'package:drift_flutter/drift_flutter.dart';\nimport 'package:path_provider/path_provider.dart';\npart 'database.g.dart';\nclass TodoItems extends Table {\n  IntColumn get id => integer().autoIncrement()();\n  TextColumn get title => text().withLength(min: 6, max: 32)();\n  TextColumn get content => text().named('body')();\n  DateTimeColumn get createdAt => dateTime().nullable()();\n}\n@DriftDatabase(tables: [TodoItems])\nclass AppDatabase extends _$AppDatabase {\n  // After generating code, this class needs to define a `schemaVersion` getter\n  // and a constructor telling drift where the database should be stored.\n  // These are described in the getting started guide: https://drift.simonbinder.eu/setup/\n  AppDatabase([QueryExecutor? executor]) : super(executor ?? _openConnection());\n  @override\n  int get schemaVersion => 1;\n  static QueryExecutor _openConnection() {\n    return driftDatabase(\n      name: 'my_database',\n      native: const DriftNativeOptions(\n        // By default, `driftDatabase` from `package:drift_flutter` stores the\n        // database files in `getApplicationDocumentsDirectory()`.\n        databaseDirectory: getApplicationSupportDirectory,\n      ),\n      // If you need web support, see https://drift.simonbinder.eu/platforms/web/\n    );\n  }\n}\n```\nIf you need to customize how databases are opened, you can also set the connection up manually:\nManual database setup\n```\nimport 'dart:io';\nimport 'package:drift/native.dart';\nimport 'package:path_provider/path_provider.dart';\nimport 'package:path/path.dart' as p;\nimport 'package:sqlite3/sqlite3.dart';\nimport 'package:sqlite3_flutter_libs/sqlite3_flutter_libs.dart';\nLazyDatabase openConnection() {\n  // the LazyDatabase util lets us find the right location for the file async.\n  return LazyDatabase(() async {\n    // put the database file, called db.sqlite here, into the documents folder\n    // for your app.\n    final dbFolder = await getApplicationDocumentsDirectory();\n    final file = File(p.join(dbFolder.path, 'db.sqlite'));\n    // Also work around limitations on old Android versions\n    if (Platform.isAndroid) {\n      await applyWorkaroundToOpenSqlite3OnOldAndroidVersions();\n    }\n    // Make sqlite3 pick a more suitable location for temporary files - the\n    // one from the system may be inaccessible due to sandboxing.\n    final cachebase = (await getTemporaryDirectory()).path;\n    // We can't access /tmp on Android, which sqlite3 would try by default.\n    // Explicitly tell it about the correct temporary directory.\n    sqlite3.tempDirectory = cachebase;\n    return NativeDatabase.createInBackground(file);\n  });\n}\n```\nThe Android-specific workarounds are necessary because sqlite3 attempts to use `/tmp` to store private data on unix-like systems, which is forbidden on Android. We also use this opportunity to work around a problem some older Android devices have with loading custom libraries through `dart:ffi`.\n```\nimport 'package:drift/drift.dart';\nimport 'dart:io';\nimport 'package:drift/native.dart';\npart 'database.g.dart';\nclass TodoItems extends Table {\n  IntColumn get id => integer().autoIncrement()();\n  TextColumn get title => text().withLength(min: 6, max: 32)();\n  TextColumn get content => text().named('body')();\n  DateTimeColumn get createdAt => dateTime().nullable()();\n}\n@DriftDatabase(tables: [TodoItems])\nclass AppDatabase extends _$AppDatabase {\n  // After generating code, this class needs to define a `schemaVersion` getter\n  // and a constructor telling drift where the database should be stored.\n  // These are described in the getting started guide: https://drift.simonbinder.eu/setup/\n  AppDatabase([QueryExecutor? executor]) : super(executor ?? _openConnection());\n  @override\n  int get schemaVersion => 1;\n  static QueryExecutor _openConnection() {\n    return NativeDatabase.createInBackground(File('path/to/your/database'));\n  }\n}\n```\n```\nimport 'package:drift/drift.dart';\nimport 'package:drift_postgres/drift_postgres.dart';\nimport 'package:postgres/postgres.dart' as pg;\npart 'database.g.dart';\nclass TodoItems extends Table {\n  IntColumn get id => integer().autoIncrement()();\n  TextColumn get title => text().withLength(min: 6, max: 32)();\n  TextColumn get content => text().named('body')();\n  DateTimeColumn get createdAt => dateTime().nullable()();\n}\n@DriftDatabase(tables: [TodoItems])\nclass AppDatabase extends _$AppDatabase {\n  // After generating code, this class needs to define a `schemaVersion` getter\n  // and a constructor telling drift where the database should be stored.\n  // These are described in the getting started guide: https://drift.simonbinder.eu/setup/\n  AppDatabase([QueryExecutor? executor]) : super(executor ?? _openConnection());\n  @override\n  int get schemaVersion => 1;\n  static QueryExecutor _openConnection() {\n    return PgDatabase(\n      endpoint: pg.Endpoint(\n        host: 'localhost',\n        database: 'database',\n        username: 'dart',\n        password: 'mysecurepassword',\n      ),\n    );\n  }\n}\n```\n## Next steps[#](https://drift.simonbinder.eu/setup#next-steps)\nCongratulations! With this setup complete, your project is ready to use drift. This short snippet shows how the database can be opened and how to run inserts and selects:\n```\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final database = AppDatabase();\n  await database\n      .into(database.todoItems)\n      .insert(\n        TodoItemsCompanion.insert(\n          title: 'todo: finish drift setup',\n          content: 'We can now write queries and define our own tables.',\n        ),\n      );\n  List<TodoItem> allItems = await database.select(database.todoItems).get();\n  print('items in database: $allItems');\n}\n```\nBut drift can do so much more! These pages provide more information useful when getting started with drift:\n-   [Dart tables](https://drift.simonbinder.eu/dart_api/tables): This page describes how to define your own tables in Dart. For an overview of the classes drift generates for tables, check out [row classes](https://drift.simonbinder.eu/dart_api/rows).\n-   For new drift users or users not familiar with SQL, the [manager](https://drift.simonbinder.eu/dart_api/manager) APIs for tables allows writing most queries with a syntax you're likely familiar with from ORMs or other packages.\n-   Writing queries: Drift-generated classes support writing the most common SQL statements, like [selects](https://drift.simonbinder.eu/dart_api/select) or [inserts, updates and deletes](https://drift.simonbinder.eu/dart_api/writes).\n-   Something to keep in mind for later: When changing the database, for instance by adding new columns or tables, you need to write a migration so that existing databases are transformed to the new format. Drift's extensive [migration tools](https://drift.simonbinder.eu/migrations) help with that.\n-   Take a look at our [FAQ](https://drift.simonbinder.eu/faq)! It will help you with the most common questions about drift projects.\nOnce you're familiar with the basics, the [overview here](https://drift.simonbinder.eu/) shows what more drift has to offer. This includes transactions, automated tooling to help with migrations, multi-platform support and more.\n-   [](https://github.com/simolus3/drift)\n[](https://jaspr.site \"Built with the Jaspr web framework for Dart.\")\n©2019–2025Simon Binder, Drift authors. Documentation licensed under [CC0 1.0](https://creativecommons.org/publicdomain/zero/1.0/), Drift itself is [MIT-licensed](https://github.com/simolus3/drift/blob/develop/LICENSE)",
  "timestamp": 1769974088778,
  "title": "Setup"
}